<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Drec api documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">Drec api documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >DeviceGroupService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/pods/device-group/device-group.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#csvParser" >csvParser</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#logger" >logger</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#AddCertificateIssueDateLogForDeviceGroup" >AddCertificateIssueDateLogForDeviceGroup</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#checkIfDeviceExisting" >checkIfDeviceExisting</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#checkIfOrganizationHasBlockhainAddressAdded" >checkIfOrganizationHasBlockhainAddressAdded</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#checkNameConflict" >checkNameConflict</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#compareDeviceForGrouping" >compareDeviceForGrouping</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#countgroupIdHistoryissuanceDevicelog" >countgroupIdHistoryissuanceDevicelog</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#create" >create</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createCSVJobForFile" >createCSVJobForFile</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createDeviceGroupFromDevices" >createDeviceGroupFromDevices</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createFailedRowDetailsForCSVJob" >createFailedRowDetailsForCSVJob</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createOne" >createOne</a>
                            </li>
                            <li>
                                <a href="#csvStringToJSON" >csvStringToJSON</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deactiveReaservation" >deactiveReaservation</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#endReservation" >endReservation</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#EndReservationGroup" >EndReservationGroup</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findById" >findById</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#findDeviceGroupById" >findDeviceGroupById</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findOne" >findOne</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                    <span class="modifier">Async</span>
                                <a href="#getAddedCSVProcessingJobsAndStartProcessing" >getAddedCSVProcessingJobsAndStartProcessing</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getAll" >getAll</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getAllCSVJobsForAdmin" >getAllCSVJobsForAdmin</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getAllCSVJobsForOrganization" >getAllCSVJobsForOrganization</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getAllNextrequestCertificate" >getAllNextrequestCertificate</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getallReservationactive" >getallReservationactive</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getBuyerDeviceGroups" >getBuyerDeviceGroups</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getCommissioningDateRange" >getCommissioningDateRange</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getcurrentInformationofDevicesInReservation" >getcurrentInformationofDevicesInReservation</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getDeviceGrouplog" >getDeviceGrouplog</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getFailedRowDetailsForCSVJob" >getFailedRowDetailsForCSVJob</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getGroupiCertificateIssueDate" >getGroupiCertificateIssueDate</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getHistoryCertificateIssueDate" >getHistoryCertificateIssueDate</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getNextHistoryissuanceDevicelog" >getNextHistoryissuanceDevicelog</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getNextHistoryissuanceDevicelogafterreservation" >getNextHistoryissuanceDevicelogafterreservation</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getoldReservationInforDeveloperBsise" >getoldReservationInforDeveloperBsise</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getOrganizationDeviceGroups" >getOrganizationDeviceGroups</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getRawFilter" >getRawFilter</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getreservationFilteredQuery" >getreservationFilteredQuery</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getReservationInforDeveloperBsise" >getReservationInforDeveloperBsise</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#hasDeviceGroup" >hasDeviceGroup</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#hasSingleAddedJobForCSVProcessing" >hasSingleAddedJobForCSVProcessing</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#HistoryUpdatecertificateissuedate" >HistoryUpdatecertificateissuedate</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#processCsvFileAnotherLibrary" >processCsvFileAnotherLibrary</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#registerCSVBulkDevices" >registerCSVBulkDevices</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#remove" >remove</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#update" >update</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updatecertificateissuedate" >updatecertificateissuedate</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#updateJobStatus" >updateJobStatus</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateLeftOverRead" >updateLeftOverRead</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateLeftOverReadByCountryCode" >updateLeftOverReadByCountryCode</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateTotalReadingRequestedForCertificateIssuance" >updateTotalReadingRequestedForCertificateIssuance</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(repositoryJobFailedRows: Repository<DeviceCsvProcessingFailedRowsEntity>, repositoyCSVJobProcessing: Repository<DeviceCsvFileProcessingJobsEntity>, repository: Repository<DeviceGroup>, repositorynextDeviceGroupcertificate: Repository<DeviceGroupNextIssueCertificate>, organizationService: <a href="../injectables/OrganizationService.html" target="_self">OrganizationService</a>, deviceService: <a href="../injectables/DeviceService.html" target="_self">DeviceService</a>, fileService: <a href="../classes/FileService.html" target="_self">FileService</a>, yieldConfigService: <a href="../injectables/YieldConfigService.html" target="_self">YieldConfigService</a>, checkdevciegrouplogcertificaterepository: Repository<CheckCertificateIssueDateLogForDeviceGroupEntity>, historynextissuancedaterepository: Repository<HistoryDeviceGroupNextIssueCertificate>, cretificatereadmoduleRepository)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="110" class="link-to-prism">src/pods/device-group/device-group.service.ts:110</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>repositoryJobFailedRows</td>
                                                  
                                                        <td>
                                                                    <code>Repository&lt;DeviceCsvProcessingFailedRowsEntity&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>repositoyCSVJobProcessing</td>
                                                  
                                                        <td>
                                                                    <code>Repository&lt;DeviceCsvFileProcessingJobsEntity&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>repository</td>
                                                  
                                                        <td>
                                                                    <code>Repository&lt;DeviceGroup&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>repositorynextDeviceGroupcertificate</td>
                                                  
                                                        <td>
                                                                    <code>Repository&lt;DeviceGroupNextIssueCertificate&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>organizationService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/OrganizationService.html" target="_self" >OrganizationService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>deviceService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/DeviceService.html" target="_self" >DeviceService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>fileService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../classes/FileService.html" target="_self" >FileService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>yieldConfigService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/YieldConfigService.html" target="_self" >YieldConfigService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>checkdevciegrouplogcertificaterepository</td>
                                                  
                                                        <td>
                                                                    <code>Repository&lt;CheckCertificateIssueDateLogForDeviceGroupEntity&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>historynextissuancedaterepository</td>
                                                  
                                                        <td>
                                                                    <code>Repository&lt;HistoryDeviceGroupNextIssueCertificate&gt;</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>cretificatereadmoduleRepository</td>
                                                  
                                                        <td>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="AddCertificateIssueDateLogForDeviceGroup"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                        <span ><b>AddCertificateIssueDateLogForDeviceGroup</b></span>
                        <a href="#AddCertificateIssueDateLogForDeviceGroup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>AddCertificateIssueDateLogForDeviceGroup(params: <a href="../entitys/CheckCertificateIssueDateLogForDeviceGroupEntity.html" target="_self">CheckCertificateIssueDateLogForDeviceGroupEntity</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1775"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1775</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>params</td>
                                            <td>
                                                            <code><a href="../entitys/CheckCertificateIssueDateLogForDeviceGroupEntity.html" target="_self" >CheckCertificateIssueDateLogForDeviceGroupEntity</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;CheckCertificateIssueDateLogForDeviceGroupEntity&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkIfDeviceExisting"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                        <span ><b>checkIfDeviceExisting</b></span>
                        <a href="#checkIfDeviceExisting"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>checkIfDeviceExisting(newDevices: <a href="../entitys/Device.html" target="_self">NewDeviceDTO[]</a>, organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="790"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:790</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>newDevices</td>
                                            <td>
                                                            <code><a href="../entitys/Device.html" target="_self" >NewDeviceDTO[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;Array&lt;string&gt;&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkIfOrganizationHasBlockhainAddressAdded"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>checkIfOrganizationHasBlockhainAddressAdded</b></span>
                        <a href="#checkIfOrganizationHasBlockhainAddressAdded"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>checkIfOrganizationHasBlockhainAddressAdded(organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1651"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1651</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkNameConflict"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>checkNameConflict</b></span>
                        <a href="#checkNameConflict"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>checkNameConflict(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, fromBulk)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="839"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:839</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>name</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>fromBulk</td>
                                            <td>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>false</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void | string&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="compareDeviceForGrouping"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>compareDeviceForGrouping</b></span>
                        <a href="#compareDeviceForGrouping"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>compareDeviceForGrouping(initialDevice: <a href="../interfaces/IDevice.html" target="_self">IDevice</a>, deviceToCompare: <a href="../interfaces/IDevice.html" target="_self">IDevice</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="875"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:875</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>initialDevice</td>
                                            <td>
                                                            <code><a href="../interfaces/IDevice.html" target="_self" >IDevice</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>deviceToCompare</td>
                                            <td>
                                                            <code><a href="../interfaces/IDevice.html" target="_self" >IDevice</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="countgroupIdHistoryissuanceDevicelog"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                        <span ><b>countgroupIdHistoryissuanceDevicelog</b></span>
                        <a href="#countgroupIdHistoryissuanceDevicelog"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>countgroupIdHistoryissuanceDevicelog(groupId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1794"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1794</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>groupId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;number&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="create"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>create</b></span>
                        <a href="#create"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>create(organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, data: <a href="../classes/NewDeviceGroupDTO.html" target="_self">NewDeviceGroupDTO</a>, fromBulk)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="478"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:478</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                            <code><a href="../classes/NewDeviceGroupDTO.html" target="_self" >NewDeviceGroupDTO</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>fromBulk</td>
                                            <td>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>false</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DeviceGroupDTO.html" target="_self" >Promise&lt;DeviceGroupDTO&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createCSVJobForFile"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>createCSVJobForFile</b></span>
                        <a href="#createCSVJobForFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createCSVJobForFile(userId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, status: <a href="../undefineds/StatusCSV.html" target="_self">StatusCSV</a>, fileId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="423"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:423</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>userId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>status</td>
                                            <td>
                                                            <code><a href="../miscellaneous/enumerations.html#StatusCSV" target="_self" >StatusCSV</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>fileId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceCsvFileProcessingJobsEntity&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createDeviceGroupFromDevices"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>createDeviceGroupFromDevices</b></span>
                        <a href="#createDeviceGroupFromDevices"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createDeviceGroupFromDevices(devices: <a href="../classes/DeviceDTO.html" target="_self">DeviceDTO[]</a>, groupName?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="903"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:903</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>devices</td>
                                            <td>
                                                            <code><a href="../classes/DeviceDTO.html" target="_self" >DeviceDTO[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>groupName</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/NewDeviceGroupDTO.html" target="_self" >NewDeviceGroupDTO</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createFailedRowDetailsForCSVJob"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>createFailedRowDetailsForCSVJob</b></span>
                        <a href="#createFailedRowDetailsForCSVJob"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createFailedRowDetailsForCSVJob(jobId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, errorDetails: Array<any>, successfullyAddedRowsAndExternalIds: Array<literal type>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="459"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:459</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>jobId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>errorDetails</td>
                                            <td>
                                                        <code>Array&lt;any&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>successfullyAddedRowsAndExternalIds</td>
                                            <td>
                                                        <code>Array&lt;literal type&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceCsvProcessingFailedRowsEntity | undefined&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createOne"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>createOne</b></span>
                        <a href="#createOne"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createOne(organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, group: <a href="../classes/AddGroupDTO.html" target="_self">AddGroupDTO</a>, buyerId?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, buyerAddress?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="604"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:604</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>group</td>
                                            <td>
                                                            <code><a href="../classes/AddGroupDTO.html" target="_self" >AddGroupDTO</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>buyerId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>buyerAddress</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;ResponseDeviceGroupDTO&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="csvStringToJSON"></a>
                    <span class="name">
                        <span ><b>csvStringToJSON</b></span>
                        <a href="#csvStringToJSON"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>csvStringToJSON(csvFileContentInString: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1564"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1564</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>csvFileContentInString</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deactiveReaservation"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>deactiveReaservation</b></span>
                        <a href="#deactiveReaservation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deactiveReaservation(group: <a href="../entitys/DeviceGroup.html" target="_self">DeviceGroup</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1752"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1752</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>group</td>
                                            <td>
                                                            <code><a href="../entitys/DeviceGroup.html" target="_self" >DeviceGroup</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="endReservation"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>endReservation</b></span>
                        <a href="#endReservation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>endReservation(groupId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, group: <a href="../entitys/DeviceGroup.html" target="_self">DeviceGroup</a>, deviceGroupIssueNextDateDTO: <a href="../entitys/DeviceGroupNextIssueCertificate.html" target="_self">DeviceGroupNextIssueCertificate</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1723"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1723</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>groupId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>group</td>
                                            <td>
                                                            <code><a href="../entitys/DeviceGroup.html" target="_self" >DeviceGroup</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>deviceGroupIssueNextDateDTO</td>
                                            <td>
                                                            <code><a href="../entitys/DeviceGroupNextIssueCertificate.html" target="_self" >DeviceGroupNextIssueCertificate</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="EndReservationGroup"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>EndReservationGroup</b></span>
                        <a href="#EndReservationGroup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>EndReservationGroup(groupId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, reservationend: <a href="../classes/EndReservationdateDTO.html" target="_self">EndReservationdateDTO</a>, group?: <a href="../classes/DeviceGroupDTO.html" target="_self">DeviceGroupDTO | DeviceGroup</a>, deviceGroupIssueNextDateDTO?: <a href="../entitys/DeviceGroupNextIssueCertificate.html" target="_self">DeviceGroupNextIssueCertificate</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1697"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1697</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>groupId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>reservationend</td>
                                            <td>
                                                            <code><a href="../classes/EndReservationdateDTO.html" target="_self" >EndReservationdateDTO</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>group</td>
                                            <td>
                                                            <code><a href="../classes/DeviceGroupDTO.html" target="_self" >DeviceGroupDTO | DeviceGroup</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>deviceGroupIssueNextDateDTO</td>
                                            <td>
                                                            <code><a href="../entitys/DeviceGroupNextIssueCertificate.html" target="_self" >DeviceGroupNextIssueCertificate</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findById"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findById</b></span>
                        <a href="#findById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findById(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="153"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:153</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DeviceGroupDTO.html" target="_self" >Promise&lt;DeviceGroupDTO&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findDeviceGroupById"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>findDeviceGroupById</b></span>
                        <a href="#findDeviceGroupById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findDeviceGroupById(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="859"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:859</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DeviceGroupDTO.html" target="_self" >Promise&lt;DeviceGroupDTO&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findOne"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findOne</b></span>
                        <a href="#findOne"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findOne(conditions: FindConditions<DeviceGroup>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="416"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:416</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>conditions</td>
                                            <td>
                                                        <code>FindConditions&lt;DeviceGroup&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceGroup | null&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAddedCSVProcessingJobsAndStartProcessing"></a>
                    <span class="name">
                            <span class="modifier"></span>
                            <span class="modifier">Async</span>
                        <span ><b>getAddedCSVProcessingJobsAndStartProcessing</b></span>
                        <a href="#getAddedCSVProcessingJobsAndStartProcessing"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAddedCSVProcessingJobsAndStartProcessing()</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Cron(CronExpression.EVERY_30_SECONDS)<br /></code>
                </td>
            </tr>

                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1047"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1047</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAll"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getAll</b></span>
                        <a href="#getAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAll()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="133"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:133</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DeviceGroupDTO.html" target="_self" >Promise&lt;DeviceGroupDTO[]&gt;</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllCSVJobsForAdmin"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getAllCSVJobsForAdmin</b></span>
                        <a href="#getAllCSVJobsForAdmin"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAllCSVJobsForAdmin()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="449"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:449</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;Array&lt;DeviceCsvFileProcessingJobsEntity&gt;&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllCSVJobsForOrganization"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getAllCSVJobsForOrganization</b></span>
                        <a href="#getAllCSVJobsForOrganization"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAllCSVJobsForOrganization(organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="438"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:438</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;Array&lt;DeviceCsvFileProcessingJobsEntity&gt;&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllNextrequestCertificate"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getAllNextrequestCertificate</b></span>
                        <a href="#getAllNextrequestCertificate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAllNextrequestCertificate()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1669"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1669</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceGroupNextIssueCertificate[]&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getallReservationactive"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getallReservationactive</b></span>
                        <a href="#getallReservationactive"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getallReservationactive()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1847"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1847</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceGroup[]&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getBuyerDeviceGroups"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getBuyerDeviceGroups</b></span>
                        <a href="#getBuyerDeviceGroups"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getBuyerDeviceGroups(buyerId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageNumber?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, groupfilterDto?: <a href="../classes/UnreservedDeviceGroupsFilterDTO.html" target="_self">UnreservedDeviceGroupsFilterDTO</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="182"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:182</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>buyerId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>pageNumber</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>groupfilterDto</td>
                                            <td>
                                                            <code><a href="../classes/UnreservedDeviceGroupsFilterDTO.html" target="_self" >UnreservedDeviceGroupsFilterDTO</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCommissioningDateRange"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getCommissioningDateRange</b></span>
                        <a href="#getCommissioningDateRange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getCommissioningDateRange(devices: <a href="../classes/DeviceDTO.html" target="_self">DeviceDTO[]</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="890"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:890</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>devices</td>
                                            <td>
                                                            <code><a href="../classes/DeviceDTO.html" target="_self" >DeviceDTO[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../miscellaneous/enumerations.html#CommissioningDateRange" target="_self" >CommissioningDateRange[]</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getcurrentInformationofDevicesInReservation"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getcurrentInformationofDevicesInReservation</b></span>
                        <a href="#getcurrentInformationofDevicesInReservation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getcurrentInformationofDevicesInReservation(groupuid)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1857"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1857</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>groupuid</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDeviceGrouplog"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                        <span ><b>getDeviceGrouplog</b></span>
                        <a href="#getDeviceGrouplog"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getDeviceGrouplog(groupid: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1765"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1765</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>groupid</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;[] | undefined&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFailedRowDetailsForCSVJob"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getFailedRowDetailsForCSVJob</b></span>
                        <a href="#getFailedRowDetailsForCSVJob"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getFailedRowDetailsForCSVJob(jobId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="470"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:470</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>jobId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/JobFailedRowsDTO.html" target="_self" >Promise&lt;JobFailedRowsDTO | undefined&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getGroupiCertificateIssueDate"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getGroupiCertificateIssueDate</b></span>
                        <a href="#getGroupiCertificateIssueDate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getGroupiCertificateIssueDate(conditions: FindConditions<DeviceGroupNextIssueCertificate>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1663"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1663</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>conditions</td>
                                            <td>
                                                        <code>FindConditions&lt;DeviceGroupNextIssueCertificate&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceGroupNextIssueCertificate | null&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getHistoryCertificateIssueDate"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getHistoryCertificateIssueDate</b></span>
                        <a href="#getHistoryCertificateIssueDate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getHistoryCertificateIssueDate(conditions: FindConditions<HistoryDeviceGroupNextIssueCertificate>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1825"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1825</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>conditions</td>
                                            <td>
                                                        <code>FindConditions&lt;HistoryDeviceGroupNextIssueCertificate&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;HistoryDeviceGroupNextIssueCertificate | null&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNextHistoryissuanceDevicelog"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                        <span ><b>getNextHistoryissuanceDevicelog</b></span>
                        <a href="#getNextHistoryissuanceDevicelog"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getNextHistoryissuanceDevicelog()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1784"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1784</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;[] | undefined&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNextHistoryissuanceDevicelogafterreservation"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                        <span ><b>getNextHistoryissuanceDevicelogafterreservation</b></span>
                        <a href="#getNextHistoryissuanceDevicelogafterreservation"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getNextHistoryissuanceDevicelogafterreservation(developerExternalId: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, groupId: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1808"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1808</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>developerExternalId</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>groupId</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;HistoryDeviceGroupNextIssueCertificate | undefined&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getoldReservationInforDeveloperBsise"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getoldReservationInforDeveloperBsise</b></span>
                        <a href="#getoldReservationInforDeveloperBsise"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getoldReservationInforDeveloperBsise(orgId, role, filterDto, pageNumber)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="2127"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:2127</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>orgId</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>role</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>filterDto</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>pageNumber</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getOrganizationDeviceGroups"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getOrganizationDeviceGroups</b></span>
                        <a href="#getOrganizationDeviceGroups"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getOrganizationDeviceGroups(organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="171"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:171</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DeviceGroupDTO.html" target="_self" >Promise&lt;DeviceGroupDTO[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getRawFilter"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getRawFilter</b></span>
                        <a href="#getRawFilter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getRawFilter(filter: Sector | Installation | OffTaker | FuelCode | Installation | CommissioningDateRange)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1012"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1012</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>filter</td>
                                            <td>
                                                        <code>Sector | Installation | OffTaker | FuelCode | Installation | CommissioningDateRange</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>FindOperator&lt;any&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getreservationFilteredQuery"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getreservationFilteredQuery</b></span>
                        <a href="#getreservationFilteredQuery"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getreservationFilteredQuery(buyerId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, filter?: <a href="../classes/UnreservedDeviceGroupsFilterDTO.html" target="_self">UnreservedDeviceGroupsFilterDTO</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="965"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:965</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>buyerId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>filter</td>
                                            <td>
                                                            <code><a href="../classes/UnreservedDeviceGroupsFilterDTO.html" target="_self" >UnreservedDeviceGroupsFilterDTO</a></code>
                                            </td>

                                            <td>
                                                    Yes
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>FindManyOptions&lt;DeviceGroup&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getReservationInforDeveloperBsise"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getReservationInforDeveloperBsise</b></span>
                        <a href="#getReservationInforDeveloperBsise"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getReservationInforDeveloperBsise(orgId, role, filterDto, pageNumber)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1913"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1913</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>orgId</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>role</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>filterDto</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>pageNumber</td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasDeviceGroup"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>hasDeviceGroup</b></span>
                        <a href="#hasDeviceGroup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasDeviceGroup(conditions: FindConditions<DeviceGroup>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="835"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:835</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>conditions</td>
                                            <td>
                                                        <code>FindConditions&lt;DeviceGroup&gt;</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasSingleAddedJobForCSVProcessing"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>hasSingleAddedJobForCSVProcessing</b></span>
                        <a href="#hasSingleAddedJobForCSVProcessing"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasSingleAddedJobForCSVProcessing()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1027"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1027</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceCsvFileProcessingJobsEntity | undefined&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="HistoryUpdatecertificateissuedate"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>HistoryUpdatecertificateissuedate</b></span>
                        <a href="#HistoryUpdatecertificateissuedate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>HistoryUpdatecertificateissuedate(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, Status: <a href="../undefineds/HistoryNextInssuanceStatus.html" target="_self">HistoryNextInssuanceStatus</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1830"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1830</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>Status</td>
                                            <td>
                                                            <code><a href="../miscellaneous/enumerations.html#HistoryNextInssuanceStatus" target="_self" >HistoryNextInssuanceStatus</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;HistoryDeviceGroupNextIssueCertificate&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="processCsvFileAnotherLibrary"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>processCsvFileAnotherLibrary</b></span>
                        <a href="#processCsvFileAnotherLibrary"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>processCsvFileAnotherLibrary(file: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, filesAddedForProcessing: <a href="../entitys/DeviceCsvFileProcessingJobsEntity.html" target="_self">DeviceCsvFileProcessingJobsEntity</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1273"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1273</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>file</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>filesAddedForProcessing</td>
                                            <td>
                                                            <code><a href="../entitys/DeviceCsvFileProcessingJobsEntity.html" target="_self" >DeviceCsvFileProcessingJobsEntity</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="registerCSVBulkDevices"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                        <span ><b>registerCSVBulkDevices</b></span>
                        <a href="#registerCSVBulkDevices"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>registerCSVBulkDevices(orgCode: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, newDevices: <a href="../entitys/Device.html" target="_self">NewDeviceDTO[]</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="812"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:812</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>orgCode</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>newDevices</td>
                                            <td>
                                                            <code><a href="../entitys/Device.html" target="_self" >NewDeviceDTO[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;[]&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="remove"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>remove</b></span>
                        <a href="#remove"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>remove(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="775"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:775</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="update"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>update</b></span>
                        <a href="#update"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>update(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, User: <a href="../interfaces/ILoggedInUser.html" target="_self">ILoggedInUser</a>, data: <a href="../classes/NewUpdateDeviceGroupDTO.html" target="_self">NewUpdateDeviceGroupDTO</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="706"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:706</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>User</td>
                                            <td>
                                                            <code><a href="../interfaces/ILoggedInUser.html" target="_self" >ILoggedInUser</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>data</td>
                                            <td>
                                                            <code><a href="../classes/NewUpdateDeviceGroupDTO.html" target="_self" >NewUpdateDeviceGroupDTO</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DeviceGroupDTO.html" target="_self" >Promise&lt;DeviceGroupDTO&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updatecertificateissuedate"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>updatecertificateissuedate</b></span>
                        <a href="#updatecertificateissuedate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updatecertificateissuedate(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, startdate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, enddate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1678"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1678</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>startdate</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>enddate</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceGroupNextIssueCertificate&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateJobStatus"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>updateJobStatus</b></span>
                        <a href="#updateJobStatus"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateJobStatus(jobId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, status: <a href="../undefineds/StatusCSV.html" target="_self">StatusCSV</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="1035"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:1035</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>jobId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>status</td>
                                            <td>
                                                            <code><a href="../miscellaneous/enumerations.html#StatusCSV" target="_self" >StatusCSV</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;DeviceCsvFileProcessingJobsEntity&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateLeftOverRead"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>updateLeftOverRead</b></span>
                        <a href="#updateLeftOverRead"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateLeftOverRead(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, leftOverRead: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="747"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:747</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>leftOverRead</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DeviceGroupDTO.html" target="_self" >Promise&lt;DeviceGroupDTO&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateLeftOverReadByCountryCode"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>updateLeftOverReadByCountryCode</b></span>
                        <a href="#updateLeftOverReadByCountryCode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateLeftOverReadByCountryCode(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, leftOverRead: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, countryCodeKey: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="757"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:757</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>leftOverRead</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>countryCodeKey</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DeviceGroupDTO.html" target="_self" >Promise&lt;DeviceGroupDTO&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateTotalReadingRequestedForCertificateIssuance"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>updateTotalReadingRequestedForCertificateIssuance</b></span>
                        <a href="#updateTotalReadingRequestedForCertificateIssuance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateTotalReadingRequestedForCertificateIssuance(groupId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, organizationId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, targetVolumeCertificateGenerationRequestedInMegaWattHour: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="728"
                                    class="link-to-prism">src/pods/device-group/device-group.service.ts:728</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>groupId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>organizationId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>targetVolumeCertificateGenerationRequestedInMegaWattHour</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="csvParser"></a>
                    <span class="name">
                        <span ><b>csvParser</b></span>
                        <a href="#csvParser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>csv({ separator: &#x27;,&#x27; })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="109" class="link-to-prism">src/pods/device-group/device-group.service.ts:109</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="logger"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>logger</b></span>
                        <a href="#logger"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Logger(DeviceGroupService.name)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="110" class="link-to-prism">src/pods/device-group/device-group.service.ts:110</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {
  Injectable,
  NotFoundException,
  Logger,
  ConflictException,
  Inject,
  UnauthorizedException,
  HttpException,
  HttpStatus,
} from &#x27;@nestjs/common&#x27;;
import { InjectRepository } from &#x27;@nestjs/typeorm&#x27;;
import {
  Repository,
  FindConditions,
  FindManyOptions,
  FindOperator,
  Raw,
  LessThan,
  In, Between, LessThanOrEqual, getConnection, Brackets
} from &#x27;typeorm&#x27;;
import { DeviceService } from &#x27;../device/device.service&#x27;;
import {
  AddGroupDTO,
  DeviceGroupDTO,
  DeviceIdsDTO,
  JobFailedRowsDTO,
  NewDeviceGroupDTO,
  ReserveGroupsDTO,
  SelectableDeviceGroupDTO,
  UnreservedDeviceGroupsFilterDTO,
  UpdateDeviceGroupDTO,
  EndReservationdateDTO,
  NewUpdateDeviceGroupDTO,
  ResponseDeviceGroupDTO
} from &#x27;./dto&#x27;;
//import { jsonbBuildObject, jsonbBuildArray, jsonbPath, jsonbArrayElements } from &#x27;typeorm-plus&#x27;;
import { defaults, cloneDeep } from &#x27;lodash&#x27;;
import { DeviceGroup } from &#x27;./device-group.entity&#x27;;
import { Device } from &#x27;../device/device.entity&#x27;;
import { DeviceDescription, IDevice, BuyerReservationCertificateGenerationFrequency } from &#x27;../../models&#x27;;
import { DeviceDTO, NewDeviceDTO, FilterDTO } from &#x27;../device/dto&#x27;;
import {
  CommissioningDateRange,
  Installation,
  OffTaker,
  Sector,
  StandardCompliance,
  FuelCode,
  DevicetypeCode,
  SingleDeviceIssuanceStatus,
  ReadType
} from &#x27;../../utils/enums&#x27;;

import moment from &#x27;moment&#x27;;

import { groupByProps } from &#x27;../../utils/group-by-properties&#x27;;
import { getCapacityRange } from &#x27;../../utils/get-capacity-range&#x27;;
import { getDateRangeFromYear } from &#x27;../../utils/get-commissioning-date-range&#x27;;
import cleanDeep from &#x27;clean-deep&#x27;;
import { OrganizationService } from &#x27;../organization/organization.service&#x27;;
import { getFuelNameFromCode } from &#x27;../../utils/getFuelNameFromCode&#x27;;
import { nanoid } from &#x27;nanoid&#x27;;
import { HistoryNextInssuanceStatus } from &#x27;../../utils/enums/history_next_issuance.enum&#x27;
import { Cron, CronExpression } from &#x27;@nestjs/schedule&#x27;;
import { DeviceCsvProcessingFailedRowsEntity } from &#x27;./device_csv_processing_failed_rows.entity&#x27;;
import {
  DeviceCsvFileProcessingJobsEntity,
  StatusCSV,
} from &#x27;./device_csv_processing_jobs.entity&#x27;;
import { DeviceGroupNextIssueCertificate } from &#x27;./device_group_issuecertificate.entity&#x27;;
import { Readable } from &#x27;stream&#x27;;
import csv from &#x27;csv-parser&#x27;;

import csvtojsonV2 from &quot;csvtojson&quot;;

import { countryCodesList } from &#x27;../../models/country-code&#x27;

import { File, FileService } from &#x27;../file&#x27;;
import { ILoggedInUser, LoggedInUser } from &#x27;../../models&#x27;;
import {
  validate,
  validateOrReject,
  Contains,
  IsInt,
  Length,
  IsEmail,
  IsFQDN,
  IsDate,
  Min,
  Max,
} from &#x27;class-validator&#x27;;
import { YieldConfigService } from &#x27;../yield-config/yieldconfig.service&#x27;;
import { NewfindLatestRead } from &#x27;../../utils/get-lastread-influx&#x27;;
import { DateTime } from &#x27;luxon&#x27;;
import { CheckCertificateIssueDateLogForDeviceGroupEntity } from &#x27;./check_certificate_issue_date_log_for_device_group.entity&#x27;
import { HistoryDeviceGroupNextIssueCertificate } from &#x27;./history_next_issuance_date_log.entity&#x27;;
import { SdgBenefit } from &#x27;../sdgbenefit/sdgbenefit.entity&#x27;;
import { isValidUTCDateFormat } from &#x27;../../utils/checkForISOStringFormat&#x27;;
import { ReadsService } from &#x27;../reads/reads.service&#x27;;
import { ICertificateReadModel } from &#x27;@energyweb/origin-247-certificate&#x27;;
import { CertificateReadModelEntity } from &#x27;@energyweb/origin-247-certificate/dist/js/src/offchain-certificate/repositories/CertificateReadModel/CertificateReadModel.entity&#x27;;
import { CheckCertificateIssueDateLogForDeviceEntity } from &#x27;../device/check_certificate_issue_date_log_for_device.entity&#x27;
import { Certificate } from &#x27;@energyweb/issuer-api&#x27;;



@Injectable()
export class DeviceGroupService {
  csvParser &#x3D; csv({ separator: &#x27;,&#x27; });
  private readonly logger &#x3D; new Logger(DeviceGroupService.name);

  constructor(
    @InjectRepository(DeviceCsvProcessingFailedRowsEntity)
    private readonly repositoryJobFailedRows: Repository&lt;DeviceCsvProcessingFailedRowsEntity&gt;,
    @InjectRepository(DeviceCsvFileProcessingJobsEntity)
    private readonly repositoyCSVJobProcessing: Repository&lt;DeviceCsvFileProcessingJobsEntity&gt;,
    @InjectRepository(DeviceGroup)
    private readonly repository: Repository&lt;DeviceGroup&gt;,
    @InjectRepository(DeviceGroupNextIssueCertificate)
    private readonly repositorynextDeviceGroupcertificate: Repository&lt;DeviceGroupNextIssueCertificate&gt;,
    private organizationService: OrganizationService,
    private deviceService: DeviceService,
    private readonly fileService: FileService,
    private yieldConfigService: YieldConfigService,
    @InjectRepository(CheckCertificateIssueDateLogForDeviceGroupEntity)
    private readonly checkdevciegrouplogcertificaterepository: Repository&lt;CheckCertificateIssueDateLogForDeviceGroupEntity&gt;,
    @InjectRepository(HistoryDeviceGroupNextIssueCertificate)
    private readonly historynextissuancedaterepository: Repository&lt;HistoryDeviceGroupNextIssueCertificate&gt;,
    @InjectRepository(CertificateReadModelEntity) private readonly cretificatereadmoduleRepository,

  ) { }

  async getAll(): Promise&lt;DeviceGroupDTO[]&gt; {
    const groups &#x3D; await this.repository.find({
      order: {
        createdAt: &#x27;DESC&#x27;,
      },
    });
    const groupsWithOrganization &#x3D; await Promise.all(
      groups.map(async (group: DeviceGroupDTO) &#x3D;&gt; {
        const organization &#x3D; await this.organizationService.findOne(
          group.organizationId,
        );
        group.organization &#x3D; {
          name: organization.name,
        };
        return group;
      }),
    );
    return groupsWithOrganization;
  }

  async findById(id: number): Promise&lt;DeviceGroupDTO&gt; {
    const deviceGroup &#x3D; await this.repository.findOne({
      id,
    });
    if (!deviceGroup) {
      throw new NotFoundException(&#x60;No device group found with id ${id}&#x60;);
    }
    deviceGroup.devices &#x3D; await this.deviceService.findForGroup(deviceGroup.id);
    const organization &#x3D; await this.organizationService.findOne(
      deviceGroup.organizationId,
    );
    deviceGroup.organization &#x3D; {
      name: organization.name,
      blockchainAccountAddress: organization.blockchainAccountAddress,
    };
    return deviceGroup;
  }

  async getOrganizationDeviceGroups(
    organizationId: number,
  ): Promise&lt;DeviceGroupDTO[]&gt; {
    return this.repository.find({
      where: { organizationId },
      order: {
        createdAt: &#x27;DESC&#x27;,
      },
    });
  }

  async getBuyerDeviceGroups(
    buyerId: number,
    pageNumber?: number,
    groupfilterDto?: UnreservedDeviceGroupsFilterDTO,

  ): Promise&lt;any&gt; {
    console.log(groupfilterDto);
    let deviceGroups: any;
    let queryBuilder: any;
    const pageSize &#x3D; 10;
    console.log(Object.keys(groupfilterDto).length);
    if (!groupfilterDto || Object.keys(groupfilterDto).length &#x3D;&#x3D;&#x3D; 0) {

      queryBuilder &#x3D; this.repository
        .createQueryBuilder(&#x27;dg&#x27;)
        .innerJoin(Device, &#x27;d&#x27;, &#x27;d.id &#x3D; ANY(dg.&quot;deviceIdsInt&quot;)&#x27;)
        .addSelect(&#x27;ARRAY_AGG(d.&quot;SDGBenefits&quot;)&#x27;, &#x27;sdgBenefits&#x27;)
        .orderBy(&#x27;dg.id&#x27;, &#x27;ASC&#x27;)
        .groupBy(&#x27;dg.id&#x27;)
      queryBuilder.where((qb) &#x3D;&gt; {
        qb.where(&#x60;dg.buyerId &#x3D; :buyerid &#x60;, {
          buyerid: buyerId
        })
      });
    }
    else {
      const skip &#x3D; (pageNumber - 1) * pageSize;
      if (groupfilterDto.start_date !&#x3D; undefined &amp;&amp; groupfilterDto.end_date !&#x3D; undefined) {
        if ((groupfilterDto.start_date !&#x3D; null &amp;&amp; groupfilterDto.end_date &#x3D;&#x3D;&#x3D; null)) {
          return new Promise((resolve, reject) &#x3D;&gt; {
            reject(new ConflictException({
              success: false,
              message: &#x60;End date should be if in filter query you used with Start date &#x60;,
            }))
          })
        }
        console.log((new Date(groupfilterDto.start_date).getTime() &lt; new Date(groupfilterDto.end_date).getTime()))
        console.log(groupfilterDto.end_date)
        console.log(new Date(groupfilterDto.start_date).getTime())

        if (!(new Date(groupfilterDto.start_date).getTime() &lt; new Date(groupfilterDto.end_date).getTime())) {
          return new Promise((resolve, reject) &#x3D;&gt; {
            reject(new ConflictException({
              success: false,
              message: &#x60;End date should be greater then from Start date &#x60;,
            }))
          })
        }
      }
      console.log(&quot;187&quot;)
      console.log(buyerId)
      queryBuilder &#x3D; this.repository
        .createQueryBuilder(&#x27;dg&#x27;)
        .innerJoin(Device, &#x27;d&#x27;, &#x27;d.id &#x3D; ANY(dg.&quot;deviceIdsInt&quot;)&#x27;)
        .addSelect(&#x27;ARRAY_AGG(d.&quot;SDGBenefits&quot;)&#x27;, &#x27;sdgBenefits&#x27;)
        .orderBy(&#x27;dg.id&#x27;, &#x27;ASC&#x27;)
        .groupBy(&#x27;dg.id&#x27;)

      queryBuilder.where((qb) &#x3D;&gt; {
        qb.where(&#x60;dg.buyerId &#x3D; :buyerid &#x60;, {
          buyerid: buyerId
        })
          .andWhere(new Brackets(qb &#x3D;&gt; {

            if (groupfilterDto.country) {
              const string &#x3D; groupfilterDto.country;
              const values &#x3D; string.split(&quot;,&quot;);
              console.log(values);
              let CountryInvalid &#x3D; false;
              values.forEach(ele &#x3D;&gt; {
                groupfilterDto.country &#x3D; ele.toUpperCase();
                if (groupfilterDto.country &amp;&amp; typeof groupfilterDto.country &#x3D;&#x3D;&#x3D; &quot;string&quot; &amp;&amp; groupfilterDto.country.length &#x3D;&#x3D;&#x3D; 3) {
                  let countries &#x3D; countryCodesList;
                  if (countries.find(ele &#x3D;&gt; ele.countryCode &#x3D;&#x3D;&#x3D; groupfilterDto.country) &#x3D;&#x3D;&#x3D; undefined) {
                    CountryInvalid &#x3D; true;
                  }
                }
              });
              console.log(CountryInvalid)
              if (!CountryInvalid) {

                qb.orWhere(&#x27;dg.countryCode @&gt; ARRAY[:...countrycode]&#x27;, { countrycode: values })

              }
            }
            if ((groupfilterDto.fuelCode)) {
              console.log(groupfilterDto.fuelCode);
              if (typeof groupfilterDto.fuelCode &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
                console.log(typeof groupfilterDto.fuelCode);
                qb.orWhere(&#x27;dg.fuelCode &#x3D; :fuelcode&#x27;, { fuelcode: [groupfilterDto.fuelCode] });
              } else if (typeof groupfilterDto.fuelCode &#x3D;&#x3D;&#x3D; &#x27;object&#x27;) {
                console.log(JSON.stringify(groupfilterDto.fuelCode));
                qb.orWhere(&#x27;dg.fuelCode @&gt; ARRAY[:...fuelcode]&#x27;, { fuelcode: groupfilterDto.fuelCode })
              }
            }
            if (groupfilterDto.offTaker) {
              console.log(typeof groupfilterDto.offTaker)
              console.log(groupfilterDto.offTaker)
              const newoffTaker &#x3D; groupfilterDto.offTaker.toString()
              console.log(typeof newoffTaker)
              const offTakerArray &#x3D; newoffTaker.split(&#x27;,&#x27;);
              qb.orWhere(new Brackets(qb &#x3D;&gt; {

                offTakerArray.forEach((offTaker, index) &#x3D;&gt; {
                  if (index &#x3D;&#x3D;&#x3D; 0) {
                    qb.orWhere(&#x60;EXISTS (SELECT 1 FROM unnest(dg.offTakers) ot WHERE ot LIKE :offtaker${index})&#x60;, { [&#x60;offtaker${index}&#x60;]: &#x60;%${offTaker}%&#x60; });

                  } else {
                    qb.orWhere(&#x60;EXISTS (SELECT 1 FROM unnest(dg.offTakers) ot WHERE ot LIKE :offtaker${index})&#x60;, { [&#x60;offtaker${index}&#x60;]: &#x60;%${offTaker}%&#x60; });

                  }
                });
              }));
            }
            // if (groupfilterDto.start_date) {

            //   qb.orWhere(&quot;dg.reservationStartDate BETWEEN :reservationStartDate1  AND :reservationEndDate1&quot;, { reservationStartDate1: groupfilterDto.start_date, reservationEndDate1: groupfilterDto.end_date })
            // }
            // if (groupfilterDto.end_date) {
            //   qb.orWhere(&quot;dg.reservationEndDate  BETWEEN :reservationStartDate2  AND :reservationEndDate2&quot;, { reservationStartDate2: groupfilterDto.start_date, reservationEndDate2: groupfilterDto.end_date })
            // }
            if (groupfilterDto.start_date &amp;&amp; groupfilterDto.end_date) {
              qb.orWhere(new Brackets((db) &#x3D;&gt; {
                db.where(
                  new Brackets((db1) &#x3D;&gt; {
                    db1.where(&quot;dg.reservationStartDate BETWEEN :reservationStartDate1  AND :reservationEndDate1&quot;, { reservationStartDate1: groupfilterDto.start_date, reservationEndDate1: groupfilterDto.end_date })
                      .orWhere(&quot;dg.reservationStartDate &#x3D; :reservationStartDate&quot;, { reservationStartDate: groupfilterDto.start_date })
                  })
                )
                  .andWhere(
                    new Brackets((db2) &#x3D;&gt; {
                      db2.where(&quot;dg.reservationEndDate  BETWEEN :reservationStartDate2  AND :reservationEndDate2&quot;, { reservationStartDate2: groupfilterDto.start_date, reservationEndDate2: groupfilterDto.end_date })
                        .orWhere(&quot;dg.reservationEndDate &#x3D; :reservationStartDate &quot;, { reservationStartDate: groupfilterDto.end_date })
                    })
                  )
              }))
            }

            if (groupfilterDto.sdgbenefit) {
              console.log(groupfilterDto.sdgbenefit);

              const newsdg &#x3D; groupfilterDto.sdgbenefit.toString()
              console.log(typeof newsdg)

              const sdgBenefitsArray &#x3D; newsdg.split(&#x27;,&#x27;);

              const sdgBenefitString &#x3D; sdgBenefitsArray.map((benefit) &#x3D;&gt; benefit).join(&#x27;,&#x27;);
              console.log(sdgBenefitString);

              qb.orWhere(new Brackets(qb &#x3D;&gt; {
                sdgBenefitsArray.forEach((benefit, index) &#x3D;&gt; {
                  if (index &#x3D;&#x3D;&#x3D; 0) {
                    qb.where(&#x60;d.SDGBenefits ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${benefit}%&#x60; });
                  } else {
                    qb.orWhere(&#x60;d.SDGBenefits ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${benefit}%&#x60; });
                  }
                });
              }));

            }
            if (groupfilterDto.reservationActive) {
              if (groupfilterDto.reservationActive &#x3D;&#x3D;&#x3D; &#x27;Active&#x27;) {
                qb.orWhere(&#x27;dg.reservationActive &#x3D; :active&#x27;, { active: true });
              }
              if (groupfilterDto.reservationActive &#x3D;&#x3D;&#x3D; &#x27;Deactive&#x27;) {
                qb.orWhere(&#x27;dg.reservationActive &#x3D; :active&#x27;, { active: false });
              }
            }

          }));
      })
      const groupedDatasql &#x3D; await queryBuilder.getSql();
    }

    const skip &#x3D; (pageNumber - 1) * pageSize;
    console.log(&quot;skip&quot;, skip)
    let groupedData &#x3D; await queryBuilder.offset(skip).limit(pageSize).getRawMany();
    console.log(queryBuilder.getSql());
    // console.log(groupedData);
    const totalCountQuery &#x3D; await queryBuilder
      .getCount()

    console.log(&quot;totalCountQuery&quot;, totalCountQuery);
    const totalPages &#x3D; Math.ceil(totalCountQuery / pageSize);
    console.log(&quot;totalPages&quot;, totalPages);
    if (totalCountQuery &gt; 0) {
      if (pageNumber &gt; totalPages) {
        throw new HttpException(&#x27;Page number out of range&#x27;, HttpStatus.NOT_FOUND);
      }
    }

    console.log(Array.isArray(deviceGroups))
    // If deviceGroups is not an array, return an empty array
    const finalreservation &#x3D; groupedData.map((deviceGroup) &#x3D;&gt; ({
      id: deviceGroup.dg_id,
      name: deviceGroup.dg_name,
      organizationId: deviceGroup.dg_organizationId,
      fuelCode: deviceGroup.dg_fuelCode,
      countryCode: deviceGroup.dg_countryCode,
      deviceTypeCodes: deviceGroup.dg_deviceTypeCodes,
      offTakers: deviceGroup.dg_offTakers,
      commissioningDateRange: deviceGroup.dg_commissioningDateRange,
      gridInterconnection: deviceGroup.dg_gridInterconnection,
      aggregatedCapacity: deviceGroup.dg_aggregatedCapacity,
      yieldValue: deviceGroup.dg_yieldValue,
      buyerId: deviceGroup.dg_buyerId,
      buyerAddress: deviceGroup.dg_buyerAddress,
      leftoverReads: deviceGroup.dg_leftoverReads,
      capacityRange: deviceGroup.dg_capacityRange,
      frequency: deviceGroup.dg_frequency,
      reservationStartDate: deviceGroup.dg_reservationStartDate,
      reservationEndDate: deviceGroup.dg_reservationEndDate,
      reservationActive: deviceGroup.dg_reservationActive,
      targetVolumeInMegaWattHour: deviceGroup.dg_targetVolumeInMegaWattHour,
      targetVolumeCertificateGenerationRequestedInMegaWattHour: deviceGroup.dg_targetVolumeCertificateGenerationRequestedInMegaWattHour,
      targetVolumeCertificateGenerationSucceededInMegaWattHour: deviceGroup.dg_targetVolumeCertificateGenerationSucceededInMegaWattHour,
      targetVolumeCertificateGenerationFailedInMegaWattHour: deviceGroup.dg_targetVolumeCertificateGenerationFailedInMegaWattHour,
      authorityToExceed: deviceGroup.dg_authorityToExceed,
      leftoverReadsByCountryCode: deviceGroup.dg_leftoverReadsByCountryCode,
      devicegroup_uid: deviceGroup.dg_devicegroup_uid,
      type: deviceGroup.dg_type,
      deviceIds: deviceGroup.dg_deviceIdsInt,
      SDGBenefits: Array.from(new Set(deviceGroup.sdgBenefits))

    }));
    const response &#x3D; {
      groupedData: finalreservation,
      pageNumber,
      totalPages,
      totalCount: totalCountQuery
    };
    return response;
  }

  async findOne(
    conditions: FindConditions&lt;DeviceGroup&gt;,
  ): Promise&lt;DeviceGroup | null&gt; {
    return (await this.repository.findOne(conditions)) ?? null;
  }


  async createCSVJobForFile(
    userId: number,
    organizationId: number,
    status: StatusCSV,
    fileId: string,
  ): Promise&lt;DeviceCsvFileProcessingJobsEntity&gt; {

    return await this.repositoyCSVJobProcessing.save({
      userId,
      organizationId,
      status,
      fileId,
    });
  }

  async getAllCSVJobsForOrganization(
    organizationId: number,
  ): Promise&lt;Array&lt;DeviceCsvFileProcessingJobsEntity&gt;&gt; {

    return await this.repositoyCSVJobProcessing.find({
      where: { organizationId },
      order: {
        createdAt: &#x27;DESC&#x27;,
      },
    });
  }
  async getAllCSVJobsForAdmin(
    
  ): Promise&lt;Array&lt;DeviceCsvFileProcessingJobsEntity&gt;&gt; {

    return await this.repositoyCSVJobProcessing.find({
      order: {
        createdAt: &#x27;DESC&#x27;,
      },
    });
  }
  async createFailedRowDetailsForCSVJob(
    jobId: number,
    errorDetails: Array&lt;any&gt;,
    successfullyAddedRowsAndExternalIds: Array&lt;{ rowNumber: number, externalId: string }&gt;
  ): Promise&lt;DeviceCsvProcessingFailedRowsEntity | undefined&gt; {
    return await this.repositoryJobFailedRows.save({
      jobId,
      errorDetails: { log: { errorDetails, successfullyAddedRowsAndExternalIds } }
    });
  }

  async getFailedRowDetailsForCSVJob(
    jobId: number,
  ): Promise&lt;JobFailedRowsDTO | undefined&gt; {
    return await this.repositoryJobFailedRows.findOne({
      jobId: jobId,
    });
  }

  async create(
    organizationId: number,
    data: NewDeviceGroupDTO,
    fromBulk &#x3D; false,
  ): Promise&lt;DeviceGroupDTO&gt; {
    const groupName &#x3D;
      (await this.checkNameConflict(data.name, fromBulk)) || data.name;
    const group &#x3D; await this.repository.save({
      organizationId,
      ...data,
      name: groupName,
    });
    const devices &#x3D; await this.deviceService.findByIds(data.deviceIds);
    let reservationIsStartingInHistoryForAtleastOneDevice: boolean &#x3D; false;
    let allDevicesHaveHistoricalIssuanceAndNoNextIssuance: boolean &#x3D; false;
    devices.filter(ele &#x3D;&gt; {
      if ((new Date(data.reservationStartDate).getTime() &lt; new Date(ele.createdAt).getTime()) &amp;&amp; (new Date(data.reservationEndDate).getTime() &lt;&#x3D; new Date(ele.createdAt).getTime())) {

        return true;
      }
    }).length &#x3D;&#x3D;&#x3D; devices.length ? (allDevicesHaveHistoricalIssuanceAndNoNextIssuance &#x3D; true) : (allDevicesHaveHistoricalIssuanceAndNoNextIssuance &#x3D; false);
    if (!allDevicesHaveHistoricalIssuanceAndNoNextIssuance) {
      //find minimum reservation start date for next issuance but also exclude in cron whose devices onbaorded date are greater than reservation start date
      //there will be single device which will have next issuance
      let minimumDeviceCreatedAtDate: Date &#x3D; new Date(2993430403962);// future date in 2064 just to find minimum
      let minimumDeviceCreatedAtIndex: number &#x3D; 0;
      devices.forEach((ele, index) &#x3D;&gt; {
        let eleDate &#x3D; new Date(ele.createdAt)
        if (eleDate.getTime() &lt; minimumDeviceCreatedAtDate.getTime()) {
          minimumDeviceCreatedAtDate &#x3D; eleDate;
          minimumDeviceCreatedAtIndex &#x3D; index;
        }
      });
      ////console.log(minimumDeviceCreatedAtDate)
      //if minimum device created at i.e onboarded date is lesser than reservation start date then that will be next issuance start date else we take minimum 
      //as we will start issuance for next issuance for devices only whose createdAt is before next issuance start date 
      let startDate: string &#x3D; &#x27;&#x27;;
      if (minimumDeviceCreatedAtDate.getTime() &lt; new Date(data.reservationStartDate).getTime()) {
        startDate &#x3D; new Date(data.reservationStartDate).toISOString()
      }
      else {
        startDate &#x3D; minimumDeviceCreatedAtDate.toISOString()
      }
      ////console.log(minimumDeviceCreatedAtDate)
      let hours &#x3D; 1;

      const frequency &#x3D; group.frequency.toLowerCase();
      if (frequency &#x3D;&#x3D;&#x3D; BuyerReservationCertificateGenerationFrequency.daily) {
        hours &#x3D; 1 * 24;
      } else if (frequency &#x3D;&#x3D;&#x3D; BuyerReservationCertificateGenerationFrequency.monthly) {
        hours &#x3D; 30 * 24;
      } else if (frequency &#x3D;&#x3D;&#x3D; BuyerReservationCertificateGenerationFrequency.weekly) {
        hours &#x3D; 7 * 24;
      } else if (frequency &#x3D;&#x3D;&#x3D; BuyerReservationCertificateGenerationFrequency.quarterly) {
        hours &#x3D; 91 * 24;
      }
      let newEndDate: string &#x3D; &#x27;&#x27;;
      let end_date &#x3D; new Date((new Date(startDate).getTime() + (hours * 3.6e+6))).toISOString()

      if (new Date(end_date).getTime() &lt; new Date(data.reservationEndDate).getTime()) {
        newEndDate &#x3D; end_date;
      }
      else {
        newEndDate &#x3D; data.reservationEndDate.toISOString();
      }
      ////console.log(&quot;newEndDate&quot;,newEndDate)
      //when there are multiple devices and there is device next to minimumCreatedAt but less than next possible end date 
      //then we consider that as end_date for next issuance else we might loose data for that particular device when next issuance frequency is added in cron
      let nextMinimumCreatedWhichIsLessThanEndDate: boolean &#x3D; false;
      let nextMinimumCreatedAtString: string &#x3D; &#x27;&#x27;;
      devices.forEach((ele, index) &#x3D;&gt; {
        if (index !&#x3D; minimumDeviceCreatedAtIndex) {
          if (new Date(ele.createdAt).getTime() &lt; new Date(newEndDate).getTime()) {
            nextMinimumCreatedWhichIsLessThanEndDate &#x3D; true;
            if (nextMinimumCreatedAtString &#x3D;&#x3D;&#x3D; &#x27;&#x27;) {
              //newEndDate
              nextMinimumCreatedAtString &#x3D; new Date(ele.createdAt).toISOString();
            }
            else {
              //check if nextMinimum is not minimum then change else leave it 
              if (new Date(ele.createdAt).getTime() &lt; new Date(nextMinimumCreatedAtString).getTime()) {
                nextMinimumCreatedAtString &#x3D; new Date(ele.createdAt).toISOString();
              }
            }

          }
        }
      })
      ////console.log(&quot;nextMinimumCreatedAtString&quot;,nextMinimumCreatedAtString)
      if (nextMinimumCreatedWhichIsLessThanEndDate) {

        if (new Date(startDate).getTime() &gt; new Date(nextMinimumCreatedAtString).getTime()) {
          newEndDate &#x3D; newEndDate;
        }
        else {
          newEndDate &#x3D; nextMinimumCreatedAtString;
        }
      }
      const nextgroupcrtifecateissue &#x3D; this.repositorynextDeviceGroupcertificate.save({
        start_date: startDate,
        end_date: newEndDate,
        groupId: group.id
      });
    }
    await Promise.all(
      devices.map(async (device: Device) &#x3D;&gt; {
        if (new Date(data.reservationStartDate).getTime() &lt; new Date(device.createdAt).getTime()) {
          const nexthistorydevicecrtifecateissue &#x3D; await this.historynextissuancedaterepository.save({
            groupId: group.id,
            device_externalid: device.externalId,
            reservationStartDate: data.reservationStartDate,
            reservationEndDate: new Date(data.reservationEndDate).getTime() &lt; new Date(device.createdAt).getTime() ? data.reservationEndDate : device.createdAt,
            device_createdAt: device.createdAt,
            status: HistoryNextInssuanceStatus.Pending
          });
        }
        return await this.deviceService.addGroupIdToDeviceForReserving(
          device,
          group.id
        );
      }),
    );

    return group;
  }

  async createOne(
    organizationId: number,
    group: AddGroupDTO,
    buyerId?: number,
    buyerAddress?: string
  ): Promise&lt;ResponseDeviceGroupDTO&gt; {
    let smallHackAsEvenAfterReturnReservationGettingCreatedWillUseBoolean: boolean &#x3D; false;
    let devices &#x3D; await this.deviceService.findByIdsWithoutGroupIdsAssignedImpliesWithoutReservation(group.deviceIds);
    let unavailableDeviceIdsDueToAlreadyIncludedInBuyerReservation: Array&lt;number&gt; &#x3D; [];
    devices.forEach(ele &#x3D;&gt; ele.groupId !&#x3D; null ? unavailableDeviceIdsDueToAlreadyIncludedInBuyerReservation.push(ele.id) : &quot;&quot;);
    devices &#x3D; devices.filter(ele &#x3D;&gt; ele.groupId &#x3D;&#x3D;&#x3D; null);
    if (devices.length &#x3D;&#x3D;&#x3D; 0) {
      smallHackAsEvenAfterReturnReservationGettingCreatedWillUseBoolean &#x3D; true;
      return new Promise((resolve, reject) &#x3D;&gt; {
        reject(new ConflictException({
          success: false,
          message: &#x60;Devices ${unavailableDeviceIdsDueToAlreadyIncludedInBuyerReservation.join(&#x27; , &#x27;)} are already included in buyer reservation, please add other devices&#x60;,
        }))
      })
    }
    let allDevicesAvailableforBuyerReservation: boolean &#x3D; true;
    let unavailableDeviceIds: Array&lt;number&gt; &#x3D; [];
    let unavailableDeviceIdsDueToCertificateAlreadyIssued: Array&lt;number&gt; &#x3D; [];
    if (devices.length &#x3D;&#x3D;&#x3D; 0) {
      smallHackAsEvenAfterReturnReservationGettingCreatedWillUseBoolean &#x3D; true;
      return new Promise((resolve, reject) &#x3D;&gt; {
        let message &#x3D; &#x27;&#x27;;
        if (unavailableDeviceIdsDueToAlreadyIncludedInBuyerReservation.length &gt; 0) {
          message &#x3D; message + &#x60;Devices ${unavailableDeviceIdsDueToAlreadyIncludedInBuyerReservation.join(&#x27; , &#x27;)} are already included in buyer reservation, please add other devices&#x60;;
        }
        message &#x3D; message + &#x60;Devices ${unavailableDeviceIdsDueToCertificateAlreadyIssued.join(&#x27; , &#x27;)} have already certified data in that date range and please add other devices or select different date range&#x60;;
        reject(new ConflictException({
          success: false,
          message: message
        }))
      })
    }
    group.deviceIds.forEach(ele &#x3D;&gt; {
      if (!devices.find(deviceSingle &#x3D;&gt; deviceSingle.id &#x3D;&#x3D;&#x3D; ele)) {
        allDevicesAvailableforBuyerReservation &#x3D; false;
        unavailableDeviceIds.push(ele);
      }
    });
    if (!group.continueWithReservationIfOneOrMoreDevicesUnavailableForReservation) {
      if (!allDevicesAvailableforBuyerReservation) {
        smallHackAsEvenAfterReturnReservationGettingCreatedWillUseBoolean &#x3D; true;
        return new Promise((resolve, reject) &#x3D;&gt; {
          reject(new ConflictException({
            success: false,
            message: &#x27;One or more devices device Ids: &#x27; + unavailableDeviceIds.join(&#x27;,&#x27;) + &#x27; are already included in buyer reservation, please add other devices&#x27;,
          }))
        })
      }
    }
    if (!group.continueWithReservationIfTargetCapacityIsLessThanDeviceTotalCapacityBetweenDuration) {
      let aggregatedCapacity &#x3D; 0;
      devices.forEach(ele &#x3D;&gt; aggregatedCapacity &#x3D; ele.capacity + aggregatedCapacity);
      let reservationStartDate &#x3D; DateTime.fromISO(new Date(group.reservationStartDate).toISOString());
      let reservationEndDate &#x3D; DateTime.fromISO(new Date(group.reservationEndDate).toISOString());
      const meteredTimePeriodInHours &#x3D; Math.abs(
        reservationEndDate.diff(reservationStartDate, [&#x27;hours&#x27;]).toObject()?.hours || 0,
      ); // hours
      let targetCapacityInKiloWattHour &#x3D; group.targetCapacityInMegaWattHour * 1000;
      if (aggregatedCapacity * meteredTimePeriodInHours &lt; targetCapacityInKiloWattHour) {
        smallHackAsEvenAfterReturnReservationGettingCreatedWillUseBoolean &#x3D; true;
        return new Promise((resolve, reject) &#x3D;&gt; {
          reject(new ConflictException({
            success: false,
            message: &#x27;Target Capacity Cannot be reached by selected devices within provided start date and end date, either add more devices or increase the end date duration&#x27;,
            details: { meteredTimePeriodInHours, targetCapacityInMegaWattHour: group.targetCapacityInMegaWattHour, probablyAchievableCapacityInMegaWattHour: aggregatedCapacity * meteredTimePeriodInHours * 0.001 }
          }))
        })
      }
    }
    if (smallHackAsEvenAfterReturnReservationGettingCreatedWillUseBoolean &#x3D;&#x3D;&#x3D; false) {
      let deviceGroup: NewDeviceGroupDTO &#x3D; this.createDeviceGroupFromDevices(devices, group.name);
      deviceGroup[&#x27;reservationStartDate&#x27;] &#x3D; group.reservationStartDate;
      deviceGroup[&#x27;reservationEndDate&#x27;] &#x3D; group.reservationEndDate;
      deviceGroup[&#x27;authorityToExceed&#x27;] &#x3D; group.authorityToExceed;
      deviceGroup[&#x27;targetVolumeInMegaWattHour&#x27;] &#x3D; group.targetCapacityInMegaWattHour;
      deviceGroup[&#x27;targetVolumeCertificateGenerationFailedInMegaWattHour&#x27;] &#x3D; 0;
      deviceGroup[&#x27;targetVolumeCertificateGenerationSucceededInMegaWattHour&#x27;] &#x3D; 0;
      deviceGroup[&#x27;targetVolumeCertificateGenerationRequestedInMegaWattHour&#x27;] &#x3D; 0;
      deviceGroup[&#x27;targetVolumeCertificateGenerationRequestedInMegaWattHour&#x27;] &#x3D; 0;
      deviceGroup[&#x27;frequency&#x27;] &#x3D; group.frequency;
      deviceGroup[&#x27;deviceIdsInt&#x27;] &#x3D; group.deviceIds;
      deviceGroup[&#x27;reservationActive&#x27;] &#x3D; true
      if (buyerId &amp;&amp; buyerAddress) {
        deviceGroup[&#x27;buyerId&#x27;] &#x3D; buyerId;
        deviceGroup[&#x27;buyerAddress&#x27;] &#x3D; buyerAddress;
      }
      let responseDeviceGroupDTO: ResponseDeviceGroupDTO &#x3D; await this.create(
        organizationId,
        deviceGroup,
      );
      responseDeviceGroupDTO.unavailableDeviceIDsDueToAreIncludedInBuyerReservation &#x3D; unavailableDeviceIdsDueToAlreadyIncludedInBuyerReservation.length &gt; 0 ? unavailableDeviceIdsDueToAlreadyIncludedInBuyerReservation.join(&#x27; , &#x27;) : &#x27;&#x27;;
      delete responseDeviceGroupDTO[&quot;deviceIdsInt&quot;];
      return responseDeviceGroupDTO;
    }
  }


  async update(
    id: number,
    User: ILoggedInUser,
    data: NewUpdateDeviceGroupDTO,
  ): Promise&lt;DeviceGroupDTO&gt; {

    await this.checkNameConflict(data.name);
    let deviceGroup &#x3D; await this.findDeviceGroupById(id, User.organizationId);
    if (User.id !&#x3D; deviceGroup.buyerId) {
      throw new UnauthorizedException({
        success: false,
        message: &#x60;Unable to update data. Unauthorized.&#x60;,
      });
    }
    deviceGroup &#x3D; defaults(data, deviceGroup);
    const updatedGroup &#x3D; await this.repository.save(deviceGroup);
    updatedGroup.devices &#x3D; await this.deviceService.findForGroup(
      deviceGroup.id,
    );
    return updatedGroup;
  }

  async updateTotalReadingRequestedForCertificateIssuance(
    groupId: number,
    organizationId: number,
    targetVolumeCertificateGenerationRequestedInMegaWattHour: number,
  ) {
    const deviceGroup &#x3D; await this.findDeviceGroupById(groupId, organizationId);
    //console.log(deviceGroup);
    //@ts-ignore
    //console.log(&quot;updatetargetmwh&quot;)
    //console.log(deviceGroup.targetVolumeCertificateGenerationRequestedInMegaWattHour);
    //console.log(targetVolumeCertificateGenerationRequestedInMegaWattHour);
    deviceGroup.targetVolumeCertificateGenerationRequestedInMegaWattHour &#x3D; deviceGroup.targetVolumeCertificateGenerationRequestedInMegaWattHour + targetVolumeCertificateGenerationRequestedInMegaWattHour;
    //console.log(&quot;afterupdatetargetmwh&quot;)
    //console.log(deviceGroup.targetVolumeCertificateGenerationRequestedInMegaWattHour);
    const updatedGroup &#x3D; await this.repository.save(deviceGroup);
    //console.log(updatedGroup);
    return updatedGroup;
  }

  async updateLeftOverRead(
    id: number,
    leftOverRead: number,
  ): Promise&lt;DeviceGroupDTO&gt; {
    const deviceGroup &#x3D; await this.findById(id);
    deviceGroup.leftoverReads &#x3D; leftOverRead;
    const updatedGroup &#x3D; await this.repository.save(deviceGroup);
    return updatedGroup;
  }

  async updateLeftOverReadByCountryCode(
    id: number,
    leftOverRead: number,
    countryCodeKey: string
  ): Promise&lt;DeviceGroupDTO&gt; {
    const deviceGroup &#x3D; await this.findById(id);
    if (deviceGroup.leftoverReadsByCountryCode &#x3D;&#x3D;&#x3D; null || deviceGroup.leftoverReadsByCountryCode &#x3D;&#x3D;&#x3D; undefined || deviceGroup.leftoverReadsByCountryCode &#x3D;&#x3D;&#x3D; &#x27;&#x27;) {
      deviceGroup.leftoverReadsByCountryCode &#x3D; {};
    }
    if (typeof deviceGroup.leftoverReadsByCountryCode &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
      deviceGroup.leftoverReadsByCountryCode &#x3D; JSON.parse(deviceGroup.leftoverReadsByCountryCode);
    }
    deviceGroup.leftoverReadsByCountryCode[countryCodeKey] &#x3D; leftOverRead;
    deviceGroup.leftoverReadsByCountryCode &#x3D; JSON.stringify(deviceGroup.leftoverReadsByCountryCode);
    const updatedGroup &#x3D; await this.repository.save(deviceGroup);
    return updatedGroup;
  }

  async remove(id: number, organizationId: number): Promise&lt;void&gt; {
    const deviceGroup &#x3D; await this.findDeviceGroupById(id, organizationId);

    const devices &#x3D; await this.deviceService.findForGroup(deviceGroup.id);
    await Promise.all(
      devices.map(async (device: Device) &#x3D;&gt; {
        return await this.deviceService.removeFromGroup(
          device.id,
          deviceGroup.id,
        );
      }),
    );
    await this.repository.delete(id);
  }

  public async checkIfDeviceExisting(
    newDevices: NewDeviceDTO[],
    organizationId: number
  ): Promise&lt;Array&lt;string&gt;&gt; {
    const allExternalIds: Array&lt;string&gt; &#x3D; [];
    const existingDeviceIds: Array&lt;string&gt; &#x3D; [];
    newDevices.forEach((singleDevice) &#x3D;&gt;
      allExternalIds.push(singleDevice.externalId),
    );
    const existingDevices &#x3D;
      await this.deviceService.findMultipleDevicesBasedExternalId(
        allExternalIds,
        organizationId
      );
    //////console.log(&quot;existingDevices&quot;,existingDevices);
    if (existingDevices &amp;&amp; existingDevices.length &gt; 0) {
      //@ts-ignore
      existingDevices.forEach((ele) &#x3D;&gt; existingDeviceIds.push(ele?.developerExternalId));
    }
    return existingDeviceIds;
  }

  public async registerCSVBulkDevices(
    orgCode: number,
    newDevices: NewDeviceDTO[],
  ): Promise&lt;
    (DeviceDTO | { isError: boolean; device: NewDeviceDTO; errorDetail: any })[]
  &gt; {
    const devices: (
      | DeviceDTO
      | { isError: boolean; device: NewDeviceDTO; errorDetail: any }
    )[] &#x3D; await Promise.all(
      newDevices.map(async (device: NewDeviceDTO) &#x3D;&gt; {
        try {
          return await this.deviceService.register(orgCode, device);
        } catch (e) {
          console.log(e)
          return { isError: true, device: device, errorDetail: e };
        }
      }),
    );
    console.log(devices);
    return devices;
  }

  private async hasDeviceGroup(conditions: FindConditions&lt;DeviceGroup&gt;) {
    return Boolean(await this.findOne(conditions));
  }

  private async checkNameConflict(
    name: string,
    fromBulk &#x3D; false,
  ): Promise&lt;void | string&gt; {
    const isExistingDeviceGroup &#x3D; await this.hasDeviceGroup({ name: name });
    if (isExistingDeviceGroup) {
      if (!fromBulk) {
        const message &#x3D; &#x60;Device group with name ${name} already exists&#x60;;

        this.logger.error(message);
        throw new ConflictException({
          success: false,
          message,
        });
      }
      // Example of new name generated: Distributed Energy-IN,Solar,REC,Industrial,StandAlone zLb
      return &#x60;${name} ${nanoid(3)}&#x60;;
    }
  }

  private async findDeviceGroupById(
    id: number,
    organizationId: number,
  ): Promise&lt;DeviceGroupDTO&gt; {
    const deviceGroup &#x3D; await this.repository.findOne({
      id,
      organizationId,
    });
    if (!deviceGroup) {
      throw new NotFoundException(
        &#x60;No device group found with id ${id} and organization ${organizationId}&#x60;,
      );
    }
    return deviceGroup;
  }

  private async compareDeviceForGrouping(
    initialDevice: IDevice,
    deviceToCompare: IDevice,
  ): Promise&lt;boolean&gt; {
    if (
      !initialDevice ||
      !deviceToCompare ||
      initialDevice.countryCode !&#x3D;&#x3D; deviceToCompare.countryCode ||
      initialDevice.fuelCode !&#x3D;&#x3D; deviceToCompare.fuelCode
    ) {
      return false;
    }
    return true;
  }

  private getCommissioningDateRange(
    devices: DeviceDTO[],
  ): CommissioningDateRange[] {
    const dates &#x3D; Array.from(
      new Set(
        devices.map((device: DeviceDTO) &#x3D;&gt;
          getDateRangeFromYear(device.commissioningDate),
        ),
      ),
    );
    return dates;
  }

  private createDeviceGroupFromDevices(
    devices: DeviceDTO[],
    groupName?: string,
  ): NewDeviceGroupDTO {
    const aggregatedCapacity &#x3D; Math.floor(
      devices.reduce(
        (accumulator, currentValue: DeviceDTO) &#x3D;&gt;
          accumulator + currentValue.capacity,
        0,
      ),
    );
    const averageYieldValue &#x3D; Math.floor(
      devices.reduce(
        (accumulator, currentValue: DeviceDTO) &#x3D;&gt;
          accumulator + currentValue.yieldValue,
        0,
      ) / devices.length,
    );
    const gridInterconnection &#x3D; devices.every(
      (device: DeviceDTO) &#x3D;&gt; device.gridInterconnection &#x3D;&#x3D;&#x3D; true,
    );

    const fuelCode &#x3D; Array.from(
      new Set(devices.map((device: DeviceDTO) &#x3D;&gt; device.fuelCode ? device.fuelCode.trim() : &#x27;&#x27;
      )),
    );
    const countryCode &#x3D; Array.from(
      new Set(devices.map((device: DeviceDTO) &#x3D;&gt; device.countryCode ? device.countryCode.trim() : &#x27;&#x27;)),
    );
    const deviceTypeCodes &#x3D; Array.from(
      new Set(devices.map((device: DeviceDTO) &#x3D;&gt; device.deviceTypeCode ? device.deviceTypeCode.trim() : &#x27;&#x27;)),
    );
    const offTakers &#x3D; Array.from(
      new Set(devices.map((device: DeviceDTO) &#x3D;&gt; device.offTaker)),
    );
    const deviceIdsInt &#x3D; Array.from(
      new Set(devices.map((device: DeviceDTO) &#x3D;&gt; device.id)),
    );

    const deviceGroup: NewDeviceGroupDTO &#x3D; {
      name: groupName,
      deviceIds: devices.map((device: DeviceDTO) &#x3D;&gt; device.id),
      fuelCode: fuelCode,//[devices.map((device: DeviceDTO) &#x3D;&gt; device.fuelCode ? device.fuelCode : &#x27;&#x27;).join(&#x27; , &#x27;)],
      countryCode: countryCode,// [devices.map((device: DeviceDTO) &#x3D;&gt; device.countryCode ? device.countryCode : &#x27;&#x27;).join(&#x27; , &#x27;)],
      //standardCompliance: devices[0].standardCompliance,
      deviceTypeCodes: deviceTypeCodes,
      //@ts-ignore
      offTakers: offTakers,//[devices.map((device: DeviceDTO) &#x3D;&gt; device.offTaker ? device.offTaker : &#x27;&#x27;).join(&#x27; , &#x27;)],
      //installationConfigurations: [devices[0].installationConfiguration],
      //sectors,
      gridInterconnection,
      aggregatedCapacity,
      capacityRange: getCapacityRange(aggregatedCapacity),
      commissioningDateRange: this.getCommissioningDateRange(devices),
      //yieldValue: averageYieldValue,
      // labels: labels ?? [],
      //devicesIds: devicesIds
    };

    return deviceGroup;
  }

  private getreservationFilteredQuery(
    buyerId: number,
    filter?: UnreservedDeviceGroupsFilterDTO
  ): FindManyOptions&lt;DeviceGroup&gt; {
    console.log(filter)
    const where: FindConditions&lt;DeviceGroup&gt; &#x3D; cleanDeep({
      // countryCode: filter.country &amp;&amp; getCodeFromCountry(filter.country),
      // gridInterconnection: filter.gridInterconnection,
      // fuelCode: filter.fuelCode,
      reservationStartDate:
        filter.start_date &amp;&amp;
        filter.end_date &amp;&amp;
        Between(filter.start_date, filter.end_date),
      reservationEndDate:
        filter.start_date &amp;&amp;
        filter.end_date &amp;&amp;
        Between(filter.start_date, filter.end_date),
    });

    // if (filter.country) {
    //   where.countryCode &#x3D; this.getRawFilter(filter.country);
    // }
    // if (filter.fuelCode) {
    //   where.fuelCode &#x3D; this.getRawFilter(filter.fuelCode);
    // }
    if (filter.offTaker) {
      where.offTakers &#x3D; this.getRawFilter(filter.offTaker);
    }
    // if (filter.commissioningDateRange) {
    //   where.commissioningDateRange &#x3D; this.getRawFilter(
    //     filter.commissioningDateRange,
    //   );
    // }
    const query: FindManyOptions&lt;DeviceGroup&gt; &#x3D; {
      where: {
        buyerId: buyerId || null,
        ...where,
      },
      order: {
        createdAt: &#x27;DESC&#x27;,
      },
    };
    console.log(query);

    return query;
  }

  private getRawFilter(
    filter:
      | Sector
      | Installation
      | OffTaker
      | FuelCode
      | Installation
      | CommissioningDateRange,
  ): FindOperator&lt;any&gt; {

    return Raw((alias) &#x3D;&gt; &#x60;${alias} @&gt; ARRAY[:...filterSectors]&#x60;, {
      filterSectors: [filter],
    });
  }

  private async hasSingleAddedJobForCSVProcessing(): Promise&lt;
    DeviceCsvFileProcessingJobsEntity | undefined
  &gt; {
    return await this.repositoyCSVJobProcessing.findOne({
      status: StatusCSV.Added,
    });
  }

  private async updateJobStatus(
    jobId: number,
    status: StatusCSV,
  ): Promise&lt;DeviceCsvFileProcessingJobsEntity&gt; {
    //@ts-ignore
    return await this.repositoyCSVJobProcessing.update(jobId, {
      status: status,
    });
  }

  @Cron(CronExpression.EVERY_30_SECONDS)
  //@Cron(&#x27;*/3 * * * *&#x27;)
  async getAddedCSVProcessingJobsAndStartProcessing() {
    console.log(&quot;bulkupload&quot;)
    const filesAddedForProcessing &#x3D;
      await this.hasSingleAddedJobForCSVProcessing();
    if (filesAddedForProcessing &#x3D;&#x3D;&#x3D; undefined) {
      return;
    }

    const data &#x3D; new LoggedInUser({
      id: filesAddedForProcessing.userId,
      //@ts-ignore
      organization: { id: filesAddedForProcessing.organizationId },
    });
    data.id &#x3D; filesAddedForProcessing.userId;
    data.organizationId &#x3D; filesAddedForProcessing.organizationId;
    const response &#x3D; await this.fileService.GetuploadS3(filesAddedForProcessing.fileId);

    console.log(&quot;response&quot;);
    // const response &#x3D; await this.fileService.get(
    //   filesAddedForProcessing.fileId,
    //   data,
    // );
    console.log(response);
    if (response &#x3D;&#x3D; undefined) {
      return;
    } else {
      ////console.log(&quot;started job processing&quot;,filesAddedForProcessing.jobId);
      this.updateJobStatus(filesAddedForProcessing.jobId, StatusCSV.Running);
      this.processCsvFileAnotherLibrary(
        response,
        filesAddedForProcessing.organizationId,
        filesAddedForProcessing,
      );
    }
  }

  /* Readable Stream didnt work for second file sent only when first file sent was working
  async processCsvFileAnotherLibrary(
    file: File,
    organizationId: number,
    filesAddedForProcessing: DeviceCsvFileProcessingJobsEntity,
  ) {
    //////console.log(&quot;into method&quot;);
    const records: Array&lt;NewDeviceDTO&gt; &#x3D; [];
    const recordsErrors: Array&lt;{ rowNumber:number;isError: boolean; errorsList: Array&lt;any&gt; }&gt; &#x3D;
      [];
      let rowsConvertedToCsvCount&#x3D;0;
    //https://stackoverflow.com/questions/13230487/converting-a-buffer-into-a-readablestream-in-node-js/44091532#44091532
    const readableStream &#x3D; new Readable();
    readableStream._read &#x3D; () &#x3D;&gt; {}; // _read is required but you can noop it
    readableStream
      .pipe(this.csvParser)
      .on(&#x27;data&#x27;, async (data) &#x3D;&gt; {
        rowsConvertedToCsvCount++;
        data.images &#x3D; [];
        data.groupId &#x3D; null;
        const dataToStore &#x3D; new NewDeviceDTO();

        const dataKeyForValidation: NewDeviceDTO &#x3D; {
          externalId: &#x27;&#x27;,
          projectName: &#x27;&#x27;,
          address: &#x27;&#x27;,
          latitude: &#x27;&#x27;,
          longitude: &#x27;&#x27;,
          countryCode: &#x27;&#x27;,
          fuelCode: &#x27;&#x27;,
          deviceTypeCode: &#x27;&#x27;,
          capacity: 0,
          commissioningDate: &#x27;&#x27;,
          gridInterconnection: false,
          offTaker: OffTaker.Commercial,
          yieldValue: 0,
          labels: &#x27;&#x27;,
          impactStory: &#x27;&#x27;,
          data: &#x27;&#x27;,
          images: [],
          deviceDescription: DeviceDescription.GroundmountSolar,
          energyStorage: true,
          energyStorageCapacity: 0,
          qualityLabels: &#x27;&#x27;,
          SDGBenefits:0,
          //groupId: 0,
        };
        for (const key in dataKeyForValidation) {
          //@ts-ignore
          if (typeof dataKeyForValidation[key] &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
            //@ts-ignore
            dataToStore[key] &#x3D; data[key];
          }
          //@ts-ignore
          else if (typeof dataKeyForValidation[key] &#x3D;&#x3D;&#x3D; &#x27;boolean&#x27;) {
            //@ts-ignore
            dataToStore[key] &#x3D;
              data[key].toLowerCase() &#x3D;&#x3D;&#x3D; &#x27;true&#x27; ? true : false;
          }
          //@ts-ignore
          else if (typeof dataKeyForValidation[key] &#x3D;&#x3D;&#x3D; &#x27;number&#x27;) {
            //@ts-ignore
            dataToStore[key] &#x3D;
              parseFloat(data[key]) &#x3D;&#x3D;&#x3D; NaN ? parseFloat(data[key]) : 0;
              //@ts-ignore
           if(key &#x3D;&#x3D; &#x27;yieldValue&#x27; &amp;&amp; dataToStore[key]&#x3D;&#x3D;&#x3D;0)
           {
            dataToStore[key]&#x3D;1500;
           }
          }
          if(key &#x3D;&#x3D; &#x27;yieldValue&#x27; &amp;&amp; data.countryCode)
          {
            let yieldByCountryCode&#x3D;await this.yieldConfigService.findByCountryCode(data.countryCode);
            if(yieldByCountryCode)
            {
              //@ts-ignore
              dataToStore.yieldValue&#x3D;yieldByCountryCode.yieldValue;
            }
          }
          // //@ts-ignore
          // else if (key &#x3D;&#x3D;&#x3D; &#x27;generatorsIds&#x27;) {
          //   if (data[key] &#x3D;&#x3D;&#x3D; &#x27;&#x27;) {
          //     //@ts-ignore
          //     dataToStore[key] &#x3D; [];
          //   } else {
          //     //@ts-ignore
          //     dataToStore[key] &#x3D; data[key].split(&#x27;|&#x27;).map(
          //       //@ts-ignore
          //       (ele) &#x3D;&gt; (parseFloat(ele) &#x3D;&#x3D;&#x3D; NaN ? 0 : parseFloat(ele)),
          //     );
          //     //@ts-ignore
          //     dataToStore[key] &#x3D; dataToStore[key].filter((ele) &#x3D;&gt; ele !&#x3D;&#x3D; 0);
          //   }
          // }
        }
        for(let key in dataToStore)
        {
          //@ts-ignore
          dataToStore[key] &#x3D;&#x3D;&#x3D; &#x27;&#x27;?dataToStore[key]&#x3D;null:&#x27;&#x27;;
        }

        //////console.log(&quot;records&quot;,JSON.stringify(records));

        records.push(dataToStore);
        recordsErrors.push({ rowNumber:rowsConvertedToCsvCount,isError: false, errorsList: [] });
      })
      .on(&#x27;end&#x27;, async () &#x3D;&gt; {
        //////console.log(&quot;data end transmissiodsdddddddddddn&quot;,records);
        for(let index&#x3D;0;index&lt;records.length;index++)
        {
          let singleRecord &#x3D; records[index];
          //////console.log(&quot;waiting&quot;);
          const errors &#x3D; await validate(singleRecord);
          //////console.log(&quot;validation errors&quot;,errors);
          // errors is an array of validation errors
          if (errors.length &gt; 0) {
            recordsErrors[index] &#x3D; { rowNumber: index, isError: true, errorsList: errors };
          } else {
            recordsErrors[index] &#x3D; { rowNumber: index, isError: false, errorsList: errors };
          }
        }

        const noErrorRecords &#x3D; records.filter(
          (record, index) &#x3D;&gt; recordsErrors[index].isError &#x3D;&#x3D;&#x3D; false,
        );
        const listofExistingDevices &#x3D; await this.checkIfDeviceExisting(records);
        if (listofExistingDevices.length &gt; 0) {
          records.forEach((singleRecord, index) &#x3D;&gt; {
            listofExistingDevices.find(
              (ele) &#x3D;&gt; ele &#x3D;&#x3D;&#x3D; singleRecord.externalId,
            );
            recordsErrors[index].isError &#x3D; true;
            recordsErrors[index].errorsList.push({
              error: &#x27;Smae ExternalId already exist, cant add entry with same external id &#x27;,
            });
          });
        }
        //////console.log(&quot;listofExistingDevices&quot;,listofExistingDevices);
        let successfullyAddedRowsAndExternalIds:Array&lt;{rowNumber:number,externalId:string}&gt;&#x3D;[];
        //noErrorRecords&#x3D; records.filter((record,index)&#x3D;&gt; recordsErrors[index].isError &#x3D;&#x3D;&#x3D; false);
        const devicesRegistered &#x3D; await this.registerCSVBulkDevices(
          organizationId,
          records,
        );
        //////console.log(&quot;devicesRegistered&quot;,devicesRegistered); 
        //@ts-ignore
        devicesRegistered.filter(ele&#x3D;&gt;ele.isError &#x3D;&#x3D;&#x3D; undefined).forEach(ele&#x3D;&gt;{
          if(ele instanceof DeviceDTO)
          {
            successfullyAddedRowsAndExternalIds.push({externalId: ele.externalId,rowNumber: records.findIndex(recEle&#x3D;&gt;recEle.externalId&#x3D;&#x3D;&#x3D; ele.externalId) +1});
          }
        })
        //////console.log(&quot;recordsErrors.find((ele) &#x3D;&gt; ele.isError &#x3D;&#x3D;&#x3D; true)&quot;,recordsErrors)
       
        if (recordsErrors.find((ele) &#x3D;&gt; ele.isError &#x3D;&#x3D;&#x3D; true)) {
          //////console.log(&quot;insie if &quot;);
          this.createFailedRowDetailsForCSVJob(
            filesAddedForProcessing.jobId,
            recordsErrors,
            successfullyAddedRowsAndExternalIds
          );
        }

        //////console.log(&quot;osdksnd if &quot;);

        this.updateJobStatus(
          filesAddedForProcessing.jobId,
          StatusCSV.Completed,
        );

      });
    //////console.log(&quot;file?.data.toString()&quot;,file?.data.toString());
    this.csvStringToJSON(file?.data.toString());
    
    csvtojsonV2().fromString(file?.data.toString()).subscribe((csvLine)&#x3D;&gt;{ 
      //////console.log(&quot;csvLine&quot;,csvLine);
    // csvLine &#x3D;&gt;  &quot;1,2,3&quot; and &quot;4,5,6&quot;
    })

    readableStream.emit(&#x27;data&#x27;, file?.data.toString());
    setTimeout(()&#x3D;&gt;{
      //////console.log(&quot;data ending emission&quot;);
      readableStream.emit(&#x27;end&#x27;);
    },60000);
    

    // },1);
  }
  */

  async processCsvFileAnotherLibrary(
    file: any,
    organizationId: number,
    filesAddedForProcessing: DeviceCsvFileProcessingJobsEntity,
  ) {
    console.log(&quot;into method&quot;);
    console.log(file.data.Body.toString(&#x27;utf-8&#x27;));
    const records: Array&lt;NewDeviceDTO&gt; &#x3D; [];
    const recordsErrors: Array&lt;{ externalId: string; rowNumber: number; isError: boolean; errorsList: Array&lt;any&gt; }&gt; &#x3D;
      [];
    let rowsConvertedToCsvCount &#x3D; 0;
    //https://stackoverflow.com/questions/13230487/converting-a-buffer-into-a-readablestream-in-node-js/44091532#44091532
    const readableStream &#x3D; new Readable();
    readableStream._read &#x3D; () &#x3D;&gt; { }; // _read is required but you can noop it
    readableStream
      .pipe(this.csvParser)
      .on(&#x27;data&#x27;, async (data) &#x3D;&gt; {

      })
      .on(&#x27;end&#x27;, async () &#x3D;&gt; {


      });
    console.log(&quot;file?.data.toString()&quot;, file?.data.toString());
    const filedata &#x3D; file.data.Body.toString(&#x27;utf-8&#x27;)
    this.csvStringToJSON(filedata);

    csvtojsonV2().fromString(filedata).subscribe(async (data: any, lineNumber: any) &#x3D;&gt; {
      ////console.log(&quot;csvLine&quot;,data,&quot;sdsds&quot;,lineNumber);
      rowsConvertedToCsvCount++;
      data.images &#x3D; [];
      data.groupId &#x3D; null;
      const dataToStore &#x3D; new NewDeviceDTO();
      dataToStore.SDGBenefits &#x3D; [];
      dataToStore.version &#x3D; &#x27;1.0&#x27;;

      const dataKeyForValidation: NewDeviceDTO &#x3D; {
        externalId: &#x27;&#x27;,
        projectName: &#x27;&#x27;,
        address: &#x27;&#x27;,
        latitude: &#x27;&#x27;,
        longitude: &#x27;&#x27;,
        countryCode: &#x27;&#x27;,
        fuelCode: FuelCode.ES100,
        deviceTypeCode: DevicetypeCode.TC150,
        capacity: 0,
        commissioningDate: &#x27;&#x27;,
        gridInterconnection: false,
        offTaker: OffTaker.Commercial,
        //yieldValue: 0,
        //labels: &#x27;&#x27;,
        impactStory: &#x27;&#x27;,
        // data: &#x27;&#x27;,
        images: [],
        deviceDescription: DeviceDescription.GroundmountSolar,
        energyStorage: true,
        energyStorageCapacity: 0,
        qualityLabels: &#x27;&#x27;,
        SDGBenefits: [],
        version: &quot;1.0&quot;,
        //groupId: 0,
      };
      for (const key in dataKeyForValidation) {
        if (key &#x3D;&#x3D;&#x3D; &quot;SDGBenefits&quot; || key &#x3D;&#x3D;&#x3D; &quot;version&quot;) {
          continue;
        }
        //@ts-ignore
        if (typeof dataKeyForValidation[key] &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
          //@ts-ignore
          dataToStore[key] &#x3D; data[key];
        }
        //@ts-ignore
        else if (typeof dataKeyForValidation[key] &#x3D;&#x3D;&#x3D; &#x27;boolean&#x27;) {
          //@ts-ignore
          dataToStore[key] &#x3D;
            data[key].toLowerCase() &#x3D;&#x3D;&#x3D; &#x27;true&#x27; ? true : false;
        }
        //@ts-ignore
        else if (typeof dataKeyForValidation[key] &#x3D;&#x3D;&#x3D; &#x27;number&#x27;) {
          //@ts-ignore
          dataToStore[key] &#x3D;
            Number.isNaN(data[key]) ? 0 : parseFloat(data[key]);
          //@ts-ignore
          if (key &#x3D;&#x3D; &#x27;yieldValue&#x27; &amp;&amp; dataToStore[key] &#x3D;&#x3D;&#x3D; 0) {
           // dataToStore[key] &#x3D; 1500;
            dataToStore[key] &#x3D; 2000;
          }

          if (key &#x3D;&#x3D;&#x3D; &quot;SdgBenefits&quot;) {
            ////console.log(&quot;data[key]&quot;,data[key]);
            ////console.log(&quot;dataToStore[key]&quot;,dataToStore[key]);
          }
        }
        if (key &#x3D;&#x3D; &#x27;yieldValue&#x27; &amp;&amp; data.countryCode) {
          let yieldByCountryCode &#x3D; await this.yieldConfigService.findByCountryCode(data.countryCode);
          if (yieldByCountryCode) {
            //@ts-ignore
            dataToStore.yieldValue &#x3D; yieldByCountryCode.yieldValue;
          }
        }
      }
      for (let key in dataToStore) {
        //@ts-ignore
        dataToStore[key] &#x3D;&#x3D;&#x3D; &#x27;&#x27; ? dataToStore[key] &#x3D; null : &#x27;&#x27;;
      }

      // console.log(&quot;records&quot;, JSON.stringify(records));

      records.push(dataToStore);
      recordsErrors.push({ externalId: &#x27;&#x27;, rowNumber: rowsConvertedToCsvCount, isError: false, errorsList: [] });

      // csvLine &#x3D;&gt;  &quot;1,2,3&quot; and &quot;4,5,6&quot;
    }).on(&#x27;done&#x27;, async (error: any) &#x3D;&gt; {

      for (let index &#x3D; 0; index &lt; records.length; index++) {
        let singleRecord &#x3D; records[index];
        if (records[index].externalId) {
          records[index].externalId &#x3D; records[index].externalId.trim();
        }
        const errors &#x3D; await validate(singleRecord);
        if (errors.length &gt; 0) {

          errors.forEach(ele &#x3D;&gt; {
            delete ele.target;
            delete ele.children;
          })
          recordsErrors[index] &#x3D; { externalId: records[index].externalId, rowNumber: index, isError: true, errorsList: errors };
        } else {
          recordsErrors[index] &#x3D; { externalId: records[index].externalId, rowNumber: index, isError: false, errorsList: errors };
        }
        // if (singleRecord.externalId !&#x3D; undefined || singleRecord.externalId !&#x3D; null) {
        //   const Regex &#x3D; /^[a-zA-Z\d\-_\s]+$/;

        //   if(!Regex.test(singleRecord.externalId)){
        //     recordsErrors[index].isError &#x3D; true;
        //     recordsErrors[index].errorsList.push({ value: singleRecord.externalId, property: &quot;externalId&quot;, constraints: { invalidExternalId: &quot;external id can contain only alphabets( lower and upper case included), numeric(0 to 9), hyphen(-), underscore(_) and spaces in between&quot; } })

        //   }

        // }
        if (singleRecord.countryCode !&#x3D; undefined) {

          singleRecord.countryCode &#x3D; singleRecord.countryCode.toUpperCase();
          if (singleRecord.countryCode &amp;&amp; typeof singleRecord.countryCode &#x3D;&#x3D;&#x3D; &quot;string&quot; &amp;&amp; singleRecord.countryCode.length &#x3D;&#x3D;&#x3D; 3) {

            if (countryCodesList.find(ele &#x3D;&gt; ele.countryCode &#x3D;&#x3D;&#x3D; singleRecord.countryCode) &#x3D;&#x3D;&#x3D; undefined) {
              recordsErrors[index].isError &#x3D; true;
              recordsErrors[index].errorsList.push({ value: singleRecord.countryCode, property: &quot;countryCode&quot;, constraints: { invalidCountryCode: &quot;Invalid countryCode&quot; } })
            }
          } else {
            recordsErrors[index].isError &#x3D; true;
            recordsErrors[index].errorsList.push({ value: singleRecord.countryCode, property: &quot;countryCode&quot;, constraints: { invalidCountryCode: &quot;Invalid countryCode&quot; } })
          }
        } else {
          recordsErrors[index].isError &#x3D; true;
          recordsErrors[index].errorsList.push({ value: singleRecord.countryCode, property: &quot;countryCode&quot;, constraints: { invalidCountryCode: &quot;Invalid countryCode&quot; } })
        }
        if (singleRecord.commissioningDate &amp;&amp; typeof singleRecord.commissioningDate &#x3D;&#x3D;&#x3D; &quot;string&quot;) {

          console.log(!isValidUTCDateFormat(singleRecord.commissioningDate));
          if (!isValidUTCDateFormat(singleRecord.commissioningDate)) {
            const hasValidSeconds &#x3D; moment(singleRecord.commissioningDate).seconds() &lt; 60;
            const hasValidMinutes &#x3D; moment(singleRecord.commissioningDate).minutes() &lt; 60;
            recordsErrors[index].isError &#x3D; true;
            if (!hasValidMinutes) {
              recordsErrors[index].errorsList.push({ value: singleRecord.commissioningDate, property: &quot;commissioningDate&quot;, constraints: { invalidDate: &quot;Invalid minutes value.&quot; } })
            }
            else if (!hasValidSeconds) {
              recordsErrors[index].errorsList.push({ value: singleRecord.commissioningDate, property: &quot;commissioningDate&quot;, constraints: { invalidDate: &quot;Invalid seconds value.&quot; } })
            }
            recordsErrors[index].errorsList.push({ value: singleRecord.commissioningDate, property: &quot;commissioningDate&quot;, constraints: { invalidDate: &quot;Invalid commission date sent.Format is YYYY-MM-DDThh:mm:ss.millisecondsZ example 2022-10-18T11:35:27.640Z&quot; } })
          }
          if (new Date(singleRecord.commissioningDate).getTime() &gt; new Date().getTime()) {
            recordsErrors[index].isError &#x3D; true;
            recordsErrors[index].errorsList.push({ value: singleRecord.commissioningDate, property: &quot;commissioningDate&quot;, constraints: { invalidDate: &quot;Invalid commissioning date, commissioning is greater than current date&quot; } })
          }
        }
        if (singleRecord.capacity &lt;&#x3D; 0) {
          recordsErrors[index].isError &#x3D; true;
          recordsErrors[index].errorsList.push({ value: singleRecord.capacity, property: &quot;capacity&quot;, constraints: { greaterThanZero: &quot;Capacity should be greater than 0&quot; } })
        }
        if (singleRecord.energyStorageCapacity &lt; 0) {
          recordsErrors[index].isError &#x3D; true;
          recordsErrors[index].errorsList.push({ value: singleRecord.energyStorageCapacity, property: &quot;energyStorageCapacity&quot;, constraints: { greaterThanZero: &quot;Energy Storage Capacity should be greater than 0&quot; } })
        }
      }

      records.forEach((singleRecord, index) &#x3D;&gt; {
        recordsErrors[index].errorsList.forEach(error &#x3D;&gt; {
          singleRecord[error.property] &#x3D; null;//making null field if it has any validation issue 
        })
      });

      const noErrorRecords &#x3D; records.filter(
        (record, index) &#x3D;&gt; recordsErrors[index].isError &#x3D;&#x3D;&#x3D; false,
      );
      const listofExistingDevices &#x3D; await this.checkIfDeviceExisting(records, organizationId);

      if (listofExistingDevices.length &gt; 0) {
        records.forEach((singleRecord, index) &#x3D;&gt; {
          if (listofExistingDevices.find(
            (ele) &#x3D;&gt; ele &#x3D;&#x3D;&#x3D; singleRecord.externalId,
          )) {
            recordsErrors[index].isError &#x3D; true;
            recordsErrors[index].errorsList.push(
              { value: singleRecord.externalId, property: &quot;externalId&quot;, constraints: { externalIdExists: &quot;ExternalId already exist, cant add entry with same external id&quot; } }
            );
          }
        });
      }
      var recordsCopy &#x3D; cloneDeep(records);
      recordsCopy.forEach(ele &#x3D;&gt; ele[&#x27;statusDuplicate&#x27;] &#x3D; false)
      const duplicatesExternalId: any &#x3D; [];
      for (let i &#x3D; 0; i &lt; recordsCopy.length - 1; i++) {
        console.log(recordsCopy[i].externalId);
        for (let j &#x3D; i + 1; j &lt; recordsCopy.length; j++) {
          console.log(recordsCopy[j].externalId);
          if (recordsCopy[i].externalId !&#x3D; null &amp;&amp; recordsCopy[j].externalId !&#x3D; null) {
            if (recordsCopy[i].externalId.toLowerCase() &#x3D;&#x3D;&#x3D; recordsCopy[j].externalId.toLowerCase() &amp;&amp; recordsCopy[j][&#x27;statusDuplicate&#x27;] &#x3D;&#x3D;&#x3D; false) {
              recordsCopy[j][&#x27;statusDuplicate&#x27;] &#x3D; true;
              duplicatesExternalId.push({
                duplicateIndex: j,
                duplicateWith: i,
                projectName: records[j].projectName,
                externalId: records[j].externalId
              });
              recordsErrors[j].isError &#x3D; true;
              recordsErrors[j].errorsList.push(
                { value: recordsCopy[j].externalId, property: &quot;externalId&quot;, constraints: { externalIdExists: &quot;Row &quot; + (j + 1) + &quot; Duplicate with row &quot; + (i + 1) + &quot; Exists with externalId &quot; + records[j].externalId } }
              );
            }
          }

        }
      }

      let successfullyAddedRowsAndExternalIds: Array&lt;{ rowNumber: number, externalId: string }&gt; &#x3D; [];
      //noErrorRecords&#x3D; records.filter((record,index)&#x3D;&gt; recordsErrors[index].isError &#x3D;&#x3D;&#x3D; false);
      let recordsToRegister &#x3D; records.filter((ele, index) &#x3D;&gt; {
        if (recordsErrors[index].errorsList.length &gt; 0) {
          //these are required fields and if one is having error we cannot try to insert the record
          if (recordsErrors[index].errorsList.find(errorRec &#x3D;&gt; errorRec.property &#x3D;&#x3D;&#x3D; &quot;externalId&quot; || errorRec.property &#x3D;&#x3D;&#x3D; &quot;commissioningDate&quot; || errorRec.property &#x3D;&#x3D;&#x3D; &quot;capacity&quot; || errorRec.property &#x3D;&#x3D;&#x3D; &quot;countryCode&quot;)) {
            return false;
          }
          else {
            return true;
          }
        }
        else
          return true;
      })

      console.log(recordsToRegister);
      console.log(&quot;records&quot;, records);
      const devicesRegistered &#x3D; await this.registerCSVBulkDevices(
        organizationId,
        recordsToRegister,
      );
      console.log(devicesRegistered);
      //@ts-ignore

      devicesRegistered.filter(ele &#x3D;&gt; ele.isError &#x3D;&#x3D;&#x3D; undefined).forEach(ele &#x3D;&gt; {

        //@ts-ignore
        successfullyAddedRowsAndExternalIds.push({ externalId: ele.externalId, rowNumber: records.findIndex(recEle &#x3D;&gt; recEle.developerExternalId &#x3D;&#x3D;&#x3D; ele.externalId) });
      })

      recordsErrors.forEach((ele, index) &#x3D;&gt; {
        if (ele.isError &#x3D;&#x3D;&#x3D; false) { ele[&quot;status&quot;] &#x3D; &#x27;Success&#x27;; }

        else if (ele.isError &#x3D;&#x3D;&#x3D; true &amp;&amp; successfullyAddedRowsAndExternalIds.find(successEle &#x3D;&gt; (successEle.externalId &#x3D;&#x3D;&#x3D; ele.externalId &amp;&amp; successEle.rowNumber &#x3D;&#x3D;&#x3D; index))) {
          ele[&#x27;status&#x27;] &#x3D; &#x27;Success with validation errors, please update fields&#x27;;
        }
        else {
          ele[&#x27;status&#x27;] &#x3D; &#x27;Failed&#x27;;
        }
      });
      //console.log(recordsErrors);
      this.createFailedRowDetailsForCSVJob(
        filesAddedForProcessing.jobId,
        recordsErrors,
        successfullyAddedRowsAndExternalIds
      );
      this.updateJobStatus(
        filesAddedForProcessing.jobId,
        StatusCSV.Completed,
      );
    })

  }

  csvStringToJSON(csvFileContentInString: string) {
    // Convert the data to String and
    // split it in an array
    var array &#x3D; csvFileContentInString.split(&quot;\r&quot;);

    // All the rows of the CSV will be
    // converted to JSON objects which
    // will be added to result in an array
    let result &#x3D; [];

    // The array[0] contains all the
    // header columns so we store them
    // in headers array
    let headers &#x3D; array[0].split(&quot;, &quot;)

    // Since headers are separated, we
    // need to traverse remaining n-1 rows.
    for (let i &#x3D; 1; i &lt; array.length - 1; i++) {
      let obj &#x3D; {}

      // Create an empty object to later add
      // values of the current row to it
      // Declare string str as current array
      // value to change the delimiter and
      // store the generated string in a new
      // string s
      let str &#x3D; array[i]
      let s &#x3D; &#x27;&#x27;

      // By Default, we get the comma separated
      // values of a cell in quotes &quot; &quot; so we
      // use flag to keep track of quotes and
      // split the string accordingly
      // If we encounter opening quote (&quot;)
      // then we keep commas as it is otherwise
      // we replace them with pipe |
      // We keep adding the characters we
      // traverse to a String s
      let flag &#x3D; 0
      for (let ch of str) {
        if (ch &#x3D;&#x3D;&#x3D; &#x27;&quot;&#x27; &amp;&amp; flag &#x3D;&#x3D;&#x3D; 0) {
          flag &#x3D; 1
        }
        else if (ch &#x3D;&#x3D;&#x3D; &#x27;&quot;&#x27; &amp;&amp; flag &#x3D;&#x3D; 1) flag &#x3D; 0
        if (ch &#x3D;&#x3D;&#x3D; &#x27;, &#x27; &amp;&amp; flag &#x3D;&#x3D;&#x3D; 0) ch &#x3D; &#x27;|&#x27;
        if (ch !&#x3D;&#x3D; &#x27;&quot;&#x27;) s +&#x3D; ch
      }

      // Split the string using pipe delimiter |
      // and store the values in a properties array
      let properties &#x3D; s.split(&quot;|&quot;)

      // For each header, if the value contains
      // multiple comma separated data, then we
      // store it in the form of array otherwise
      // directly the value is stored
      for (let j in headers) {
        if (properties[j].includes(&quot;, &quot;)) {
          //@ts-ignore
          obj[headers[j]] &#x3D; properties[j]
            .split(&quot;, &quot;).map(item &#x3D;&gt; item.trim())
        }
        else {
          //@ts-ignore
          obj[headers[j]] &#x3D; properties[j];
        }
      }

      // Add the generated object to our
      // result array
      result.push(obj)
    }

    //////console.log(result);
  }

  // async getGroupiCertificateIssueDate(
  //   organizationId: number,
  // ): Promise&lt;DeviceGroupIssueCertificate{}&gt; {
  //   ////console.log(organizationId);
  //   return await this.repositoryDeviceGroupcertificate.findByIds({
  //     organizationId
  //     //status:StatusCSV.Completed
  //   });
  // }


  async checkIfOrganizationHasBlockhainAddressAdded(organizationId: number): Promise&lt;boolean&gt; {
    const organization &#x3D; await this.organizationService.findOne(
      organizationId,
    );
    if (organization.blockchainAccountAddress) {
      return true;
    }
    else {
      return false;
    }

  }
  async getGroupiCertificateIssueDate(
    conditions: FindConditions&lt;DeviceGroupNextIssueCertificate&gt;,
  ): Promise&lt;DeviceGroupNextIssueCertificate | null&gt; {
    console.log(&quot;1883&quot;)
    return (await this.repositorynextDeviceGroupcertificate.findOne(conditions)) ?? null;
  }
  async getAllNextrequestCertificate(
  ): Promise&lt;DeviceGroupNextIssueCertificate[]&gt; {
    const groupId &#x3D; await this.repositorynextDeviceGroupcertificate.find({
      where: { end_date: LessThan(new Date()) },
    });
    ////console.log(groupId)
    return groupId
  }

  async updatecertificateissuedate(
    id: number,
    startdate: string,
    enddate: string,
  ): Promise&lt;DeviceGroupNextIssueCertificate&gt; {
    // await this.checkNameConflict(data.name);
    const deviceGroupdate &#x3D; await this.getGroupiCertificateIssueDate({ id: id });
    let updatedissuedate &#x3D; new DeviceGroupNextIssueCertificate();
    if (deviceGroupdate) {

      deviceGroupdate.start_date &#x3D; startdate;
      deviceGroupdate.end_date &#x3D; enddate;
      updatedissuedate &#x3D; await this.repositorynextDeviceGroupcertificate.save(deviceGroupdate);


    }
    return updatedissuedate;
  }

  async EndReservationGroup(
    groupId: number,
    organizationId: number,
    reservationend: EndReservationdateDTO,
    group?: DeviceGroupDTO | DeviceGroup,
    deviceGroupIssueNextDateDTO?: DeviceGroupNextIssueCertificate,
  ): Promise&lt;void&gt; {
    if (!group)
      group &#x3D; await this.findDeviceGroupById(groupId, organizationId);
    //@ts-ignore
    ////console.log(&quot;new Date(group?.reservationEndDate).getTime() &#x3D;&#x3D;&#x3D; new Date(reservationend).getTime()&quot;, &quot;group?.reservationEndDate&quot;, group?.reservationEndDate, &quot;reservationend&quot;, reservationend, &quot;new Date(group?.reservationEndDate).getTime()&quot;, new Date(group?.reservationEndDate).getTime(), &quot;new Date(reservationend).getTime()&quot;, new Date(reservationend).getTime(), new Date(group?.reservationEndDate).getTime() &#x3D;&#x3D;&#x3D; new Date(reservationend).getTime());
    //@ts-ignore
    if (new Date(group?.reservationEndDate).getTime() &#x3D;&#x3D;&#x3D; new Date(reservationend.endresavationdate).getTime()) {
      ////console.log(&quot;came inside ending reservation&quot;);

      if (!deviceGroupIssueNextDateDTO)
        deviceGroupIssueNextDateDTO &#x3D; await this.getGroupiCertificateIssueDate({ groupId: groupId });
      //@ts-ignore

      this.endReservation(groupId, group, deviceGroupIssueNextDateDTO)
      return;
    }

  }


  async endReservation(
    groupId: number,
    group: DeviceGroup,
    deviceGroupIssueNextDateDTO: DeviceGroupNextIssueCertificate
  ): Promise&lt;void&gt; {

    let updatedissuedatestatus &#x3D; new DeviceGroup();
    if (group) {

      group.reservationActive &#x3D; false
      updatedissuedatestatus &#x3D; await this.repository.save(group);

    }

    await this.repositorynextDeviceGroupcertificate.delete(deviceGroupIssueNextDateDTO.id);
    let devices &#x3D; await this.deviceService.findForGroup(groupId);

    if (!devices?.length) {
      return;
    }

    await Promise.all(
      devices.map(async (device: any) &#x3D;&gt; {
        await this.deviceService.removeFromGroup(device.id, groupId);
      }),
    );
    return;
  }

  async deactiveReaservation(group: DeviceGroup): Promise&lt;void&gt; {
    //console.log(group);
    let updatedissuedatestatus &#x3D; new DeviceGroup();
    if (group) {

      group.reservationActive &#x3D; false
      updatedissuedatestatus &#x3D; await this.repository.save(group);
      return;
    }


  }

  public async getDeviceGrouplog(
    groupid: number,
  ): Promise&lt;CheckCertificateIssueDateLogForDeviceGroupEntity[] | undefined&gt; {
    return this.checkdevciegrouplogcertificaterepository.find({
      where: {
        groupid,
      },
    });
  }

  public async AddCertificateIssueDateLogForDeviceGroup(params: CheckCertificateIssueDateLogForDeviceGroupEntity
  ): Promise&lt;CheckCertificateIssueDateLogForDeviceGroupEntity&gt; {
    return await this.checkdevciegrouplogcertificaterepository.save({
      ...params,

    });
  }


  public async getNextHistoryissuanceDevicelog(

  ): Promise&lt;HistoryDeviceGroupNextIssueCertificate[] | undefined&gt; {
    return this.historynextissuancedaterepository.find({
      where: {
        status: HistoryNextInssuanceStatus.Pending
      }
    });
  }

  public async countgroupIdHistoryissuanceDevicelog(groupId: number): Promise&lt;number&gt; {
    //const repository &#x3D; getRepository(HistoryDeviceGroupNextIssueCertificate);
    const count &#x3D; await this.historynextissuancedaterepository.count({
      where: {
        groupId: groupId,
        status: &#x27;Pending&#x27;,
      },
    });
    console.log(groupId, &quot;count&quot;, count)
    return count;
  }



  public async getNextHistoryissuanceDevicelogafterreservation(
    developerExternalId: any,
    groupId: any
  ): Promise&lt;HistoryDeviceGroupNextIssueCertificate | undefined&gt; {
    console.log(developerExternalId);
    console.log(groupId);
    console.log(&quot;result1844&quot;);
    console.log(&quot;result1844&quot;);
    const result &#x3D; await this.historynextissuancedaterepository.findOne({
      device_externalid: developerExternalId,
      groupId: groupId,
      status: &#x27;Completed&#x27;
    });
    console.log(result);
    return result
  }

  async getHistoryCertificateIssueDate(
    conditions: FindConditions&lt;HistoryDeviceGroupNextIssueCertificate&gt;,
  ): Promise&lt;HistoryDeviceGroupNextIssueCertificate | null&gt; {
    return (await this.historynextissuancedaterepository.findOne(conditions)) ?? null;
  }
  async HistoryUpdatecertificateissuedate(
    id: number,
    Status: HistoryNextInssuanceStatus
  ): Promise&lt;HistoryDeviceGroupNextIssueCertificate&gt; {
    ////console.log(&quot;HistoryUpdatecertificateissuedate&quot;)
    // await this.checkNameConflict(data.name);
    const historynextdate &#x3D; await this.getHistoryCertificateIssueDate({ id: id });
    let updatedissuedatestatus &#x3D; new HistoryDeviceGroupNextIssueCertificate();
    if (historynextdate) {

      historynextdate.status &#x3D; Status
      updatedissuedatestatus &#x3D; await this.historynextissuancedaterepository.save(historynextdate);

    }
    return updatedissuedatestatus;
  }

  async getallReservationactive(): Promise&lt;DeviceGroup[]&gt; {
    const activeresvation &#x3D; await this.repository.find({
      where: {
        reservationActive: true
      }
    })
    console.log(activeresvation);
    return activeresvation
  }

  async getcurrentInformationofDevicesInReservation(groupuid): Promise&lt;any&gt; {
    const group &#x3D; await this.findOne({ devicegroup_uid: groupuid, reservationActive: true })
    // console.log(group)
    if (group &#x3D;&#x3D;&#x3D; null) {
      return new Promise((resolve, reject) &#x3D;&gt; {
        reject(new ConflictException({
          success: false,
          message: &#x27;Group UId is not of this buyer, invalid value was sent&#x27;,
        }))
      })
    }
    const devices &#x3D; await this.deviceService.findByIds(group.deviceIdsInt);
    const device_historynextissuance &#x3D; [];
    await Promise.all(
      devices.map(async (device) &#x3D;&gt; {
        // console.log(device);
        const historynext_issuancer &#x3D; await this.historynextissuancedaterepository.find(
          {
            where: {
              groupId: group.id,
              device_externalid: device.externalId
            },
          }
        );
        historynext_issuancer.forEach(element &#x3D;&gt; {
          element.device_externalid &#x3D; device.developerExternalId
          delete element[&quot;createdAt&quot;];
          delete element[&quot;groupId&quot;];
          delete element[&quot;id&quot;];
          delete element[&quot;updatedAt&quot;];

        });
        device_historynextissuance.push({
          historynext_issuancer,

        })
      }),
    );
    let AllDeviceshistnextissuansinfo: any &#x3D; []
    device_historynextissuance.forEach(ele &#x3D;&gt; ele.historynext_issuancer.forEach(he &#x3D;&gt; AllDeviceshistnextissuansinfo.push(he)))
    //console.log(group.id)
    let nextissuance &#x3D; {};
    nextissuance &#x3D; await this.repositorynextDeviceGroupcertificate.findOne({
      where: {
        groupId: group.id
      }
    }) ?? null;
    //console.log(nextissuance)

    return {

      AllDeviceshistnextissuansinfo,
      ongoing_next_issuance: nextissuance
    }
  }

  async getReservationInforDeveloperBsise(orgId, role, filterDto, pageNumber): Promise&lt;any&gt; {
    const pageSize &#x3D; 10;
    if (pageNumber &lt;&#x3D; 0) {
      throw new HttpException(&#x27;Invalid page number&#x27;, HttpStatus.BAD_REQUEST);
    }
    const skip &#x3D; (pageNumber - 1) * pageSize;
    console.log(skip)
    let queryBuilder: any;
    queryBuilder &#x3D; this.repository.createQueryBuilder(&#x27;dg&#x27;)
      .innerJoin(Device, &#x27;d&#x27;, &#x27;d.id &#x3D; ANY(dg.deviceIdsInt)&#x27;)
      .innerJoin(
        CheckCertificateIssueDateLogForDeviceGroupEntity,
        &#x27;dg_log&#x27;,
        &#x27;dg_log.groupId &#x3D; dg.id&#x27;
      )
      .innerJoin(
        CertificateReadModelEntity,
        &#x27;crm&#x27;,
        &#x27;dg_log.certificateTransactionUID &#x3D; (crm.metadata::jsonb)-&gt;&gt;\&#x27;certificateTransactionUID\&#x27;&#x27;
      )
      .select(&#x27;DISTINCT ON (dg.id, crm.internalCertificateId) dg.id AS deviceGroupId, dg.name, dg.deviceIdsInt, d.*, dg_log.readvalue_watthour, crm.internalCertificateId&#x27;)
      .orderBy(&#x27;dg.id, crm.internalCertificateId, dg_log.readvalue_watthour&#x27;, &#x27;ASC&#x27;)

    queryBuilder.where((qb) &#x3D;&gt; {
      let where_orgnaizationId: any;
      if (role &#x3D;&#x3D;&#x3D; &#x27;OrganizationAdmin&#x27;) {
        where_orgnaizationId &#x3D; qb.where(&#x60;d.organizationId &#x3D; :orgId&#x60;, { orgId: orgId })
      }
      if (role &#x3D;&#x3D;&#x3D; &#x27;Buyer&#x27;) {
        where_orgnaizationId &#x3D; qb.where(&#x60;dg.organizationId &#x3D; :orgId&#x60;, { orgId: orgId })
      }

      where_orgnaizationId
        .andWhere(&#x27;EXISTS(SELECT 1 FROM jsonb_array_elements_text(CAST(crm.metadata  AS jsonb)-&gt;\&#x27;deviceIds\&#x27;) AS ids(deviceId) WHERE CAST(ids.deviceId AS INTEGER) &#x3D; d.id)&#x27;)
        .andWhere(new Brackets(qb &#x3D;&gt; {
          if (filterDto.country) {
            const string &#x3D; filterDto.country;
            const values &#x3D; string.split(&quot;,&quot;);
            console.log(values);
            let CountryInvalid &#x3D; false;
            filterDto.country &#x3D; filterDto.country.toUpperCase();
            if (filterDto.country &amp;&amp; typeof filterDto.country &#x3D;&#x3D;&#x3D; &quot;string&quot; &amp;&amp; filterDto.country.length &#x3D;&#x3D;&#x3D; 3) {
              let countries &#x3D; countryCodesList;
              if (countries.find(ele &#x3D;&gt; ele.countryCode &#x3D;&#x3D;&#x3D; filterDto.country) &#x3D;&#x3D;&#x3D; undefined) {
                CountryInvalid &#x3D; true;
              }
            }

            if (!CountryInvalid) {
              const newCountry &#x3D; filterDto.country.toString()
              console.log(typeof newCountry)
              const CountryArray &#x3D; newCountry.split(&#x27;,&#x27;);
              qb.orWhere(new Brackets(qb &#x3D;&gt; {

                CountryArray.forEach((country, index) &#x3D;&gt; {
                  if (index &#x3D;&#x3D;&#x3D; 0) {
                    qb.where(&#x60;d.countryCode ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${country}%&#x60; });
                  } else {
                    qb.orWhere(&#x60;d.countryCode ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${country}%&#x60; });
                  }
                });
              }));

              // qb.orWhere(&#x27;d.countryCode LIKE &#x3D; :countrycode&#x27;, { countrycode: &#x60;%${filterDto.country}%&#x60; });

            }
          }
          if ((filterDto.fuelCode)) {
            console.log(typeof filterDto.fuelCode);
            console.log(typeof filterDto.fuelCode);
            const newfuelCode &#x3D; filterDto.fuelCode.toString()
            console.log(typeof newfuelCode)
            const fuelCodeArray &#x3D; newfuelCode.split(&#x27;,&#x27;);
            qb.orWhere(new Brackets(qb &#x3D;&gt; {

              fuelCodeArray.forEach((fuelCode, index) &#x3D;&gt; {
                if (index &#x3D;&#x3D;&#x3D; 0) {
                  qb.where(&#x60;d.fuelCode ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${fuelCode}%&#x60; });
                } else {
                  qb.orWhere(&#x60;d.fuelCode ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${fuelCode}%&#x60; });
                }
              });
            }));
            //  qb.orWhere(&#x60;d.fuelCode LIKE &#x3D; :fuelcode&#x60;,  &#x60;%${filterDto.fuelCode}%&#x60;);

          }
          if (filterDto.offTaker) {
            // console.log(typeof filterDto.offTaker);
            const newoffTaker &#x3D; filterDto.offTaker.toString()
            console.log(typeof newoffTaker)
            const offTakerArray &#x3D; newoffTaker.split(&#x27;,&#x27;);
            qb.orWhere(new Brackets(qb &#x3D;&gt; {

              offTakerArray.forEach((offTaker, index) &#x3D;&gt; {
                if (index &#x3D;&#x3D;&#x3D; 0) {
                  qb.where(&#x60;d.offTaker ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${offTaker}%&#x60; });
                } else {
                  qb.orWhere(&#x60;d.offTaker ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${offTaker}%&#x60; });
                }
              });
            }));
            // qb.orWhere(&#x27;d.offTakers LIKE &#x3D; :offTaker&#x27;,  &#x60;%${filterDto.offTaker}%&#x60;);

          }
          const startTimestamp &#x3D; new Date(filterDto.start_date).getTime() / 1000;
          const endTimestamp &#x3D; new Date(filterDto.end_date).getTime() / 1000;
          if (filterDto.start_date &amp;&amp; filterDto.end_date &#x3D;&#x3D;&#x3D; undefined) {
            qb.orWhere(&quot;crm.generationStartTime &gt; :certificateStartDate &quot;, { certificateStartDate: startTimestamp })
          }
          if (filterDto.end_date &amp;&amp; filterDto.start_date &#x3D;&#x3D;&#x3D; undefined) {
            qb.orWhere(&quot;crm.generationEndTime  &lt;:certificateEndDate&quot;, { certificateEndDate: endTimestamp })
          }
          if (filterDto.start_date &amp;&amp; filterDto.end_date) {
            qb.orWhere(&quot;crm.generationStartTime BETWEEN :certificateStartDate1  AND :certificateEndDate1&quot;, { certificateStartDate1: startTimestamp, certificateEndDate1: endTimestamp })
          }
          if (filterDto.SDGBenefits) {
            console.log(filterDto.SDGBenefits);

            const newsdg &#x3D; filterDto.SDGBenefits.toString()
            console.log(typeof newsdg)
            const sdgBenefitsArray &#x3D; newsdg.split(&#x27;,&#x27;);
            const sdgBenefitString &#x3D; sdgBenefitsArray.map((benefit) &#x3D;&gt; benefit).join(&#x27;,&#x27;);
            qb.orWhere(new Brackets(qb &#x3D;&gt; {
              sdgBenefitsArray.forEach((benefit, index) &#x3D;&gt; {
                if (index &#x3D;&#x3D;&#x3D; 0) {
                  qb.where(&#x60;d.SDGBenefits ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${benefit}%&#x60; });
                } else {
                  qb.orWhere(&#x60;d.SDGBenefits ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${benefit}%&#x60; });
                }
              });
            }));

          }
          if (filterDto.fromAmountread &amp;&amp; filterDto.toAmountread) {
            qb.orWhere(&quot;dg_log.readvalue_watthour BETWEEN :fromAmountread  AND :toAmountread&quot;, { fromAmountread: filterDto.fromAmountread, toAmountread: filterDto.toAmountread })
          }
          if (filterDto.fromAmountread !&#x3D; null &amp;&amp; filterDto.toAmountread &#x3D;&#x3D;&#x3D; undefined) {
            qb.orWhere(&quot;dg_log.readvalue_watthour &gt; :fromAmountread&quot;, { fromAmountread: filterDto.fromAmountread })
          }
          if (filterDto.fromAmountread &#x3D;&#x3D;&#x3D; undefined &amp;&amp; filterDto.toAmountread !&#x3D; null) {
            qb.orWhere(&quot;dg_log.readvalue_watthour &lt; :toAmountread&quot;, { toAmountread: filterDto.toAmountread })
          }
        }));

    })
    const totalCountQuery &#x3D; await queryBuilder.getRawMany();
    const groupedDatasql &#x3D; await queryBuilder.offset(skip).limit(pageSize).getSql();
    console.log(groupedDatasql);
    const groupedData &#x3D; await queryBuilder.offset(skip).limit(pageSize).getRawMany();
    const totalCount &#x3D; totalCountQuery.length;
    console.log(&quot;totalCountQuery&quot;, totalCount);
    const totalPages &#x3D; Math.ceil(totalCount / pageSize);


    console.log(totalPages);
    let deviceGroups: any;
    if (role &#x3D;&#x3D;&#x3D; &#x27;OrganizationAdmin&#x27;) {
      deviceGroups &#x3D; groupedData.reduce((acc, curr) &#x3D;&gt; {

        const existing &#x3D; acc.find(item &#x3D;&gt; item.dg_id &#x3D;&#x3D;&#x3D; curr.devicegroupid);

        if (existing) {
          let newobj &#x3D; {};

          const existing1 &#x3D; acc.find(item &#x3D;&gt; item.id &#x3D;&#x3D;&#x3D; curr.id);
          if (existing1) {
            existing.developerdeviceIds.push(curr.id);
          }
          existing.internalCertificateId.push(curr.internalCertificateId)

        } else {

          acc.push({
            dg_id: curr.devicegroupid,
            name: curr.name,
            deviceIdsInt: curr.deviceIdsInt,
            // deviceIdsInt: curr.deviceIdsInt,
            developerdeviceIds: [curr.id],
            internalCertificateId: [curr.internalCertificateId]
          });

        }
        return acc;
      }, []);
    }
    if (role &#x3D;&#x3D;&#x3D; &#x27;Buyer&#x27;) {
      deviceGroups &#x3D; groupedData.reduce((acc, curr) &#x3D;&gt; {

        const existing &#x3D; acc.find(item &#x3D;&gt; item.dg_id &#x3D;&#x3D;&#x3D; curr.devicegroupid);

        if (existing) {
          existing.internalCertificateId.push(curr.internalCertificateId)
        } else {

          acc.push({
            dg_id: curr.devicegroupid,
            name: curr.name,
            deviceIdsInt: curr.deviceIdsInt,
            internalCertificateId: [curr.internalCertificateId]
          });

        }
        return acc;
      }, []);
    }

    const response &#x3D; {
      deviceGroups,
      pageNumber,
      totalPages,
      totalCount
    };
    return response;
  }
  async getoldReservationInforDeveloperBsise(orgId, role, filterDto, pageNumber): Promise&lt;any&gt; {
    const pageSize &#x3D; 10;
    // const pageNumber &#x3D; 2
    if (pageNumber &lt;&#x3D; 0) {
      throw new HttpException(&#x27;Invalid page number&#x27;, HttpStatus.BAD_REQUEST);
    }

    const skip &#x3D; (pageNumber - 1) * pageSize;
    console.log(skip)

    let queryBuilder: any;
    queryBuilder &#x3D; this.repository.createQueryBuilder(&#x27;dg&#x27;)
      .innerJoin(Device, &#x27;d&#x27;, &#x27;d.id &#x3D; ANY(dg.deviceIdsInt)&#x27;)
      .innerJoin(
        CheckCertificateIssueDateLogForDeviceGroupEntity,
        &#x27;dg_log&#x27;,
        &#x27;dg_log.groupId &#x3D; dg.id&#x27;
      )
      .innerJoin(Certificate, &#x27;issuer&#x27;, &#x27;CAST(issuer.deviceId AS INTEGER) &#x3D; dg.id&#x27;)
      .select(&#x27;DISTINCT ON (dg.id, issuer.id) dg.id AS deviceGroupId, dg.name, dg.deviceIdsInt, d.*, dg_log.readvalue_watthour, issuer.id&#x27;)
      .orderBy(&#x27;dg.id, issuer.id, dg_log.readvalue_watthour&#x27;, &#x27;ASC&#x27;)

    queryBuilder.where((qb) &#x3D;&gt; {
      let where_orgnaizationId: any;
      if (role &#x3D;&#x3D;&#x3D; &#x27;OrganizationAdmin&#x27;) {
        where_orgnaizationId &#x3D; qb.where(&#x60;d.organizationId &#x3D; :orgId&#x60;, { orgId: orgId })
      }
      if (role &#x3D;&#x3D;&#x3D; &#x27;Buyer&#x27;) {
        where_orgnaizationId &#x3D; qb.where(&#x60;dg.organizationId &#x3D; :orgId&#x60;, { orgId: orgId })
      }

      where_orgnaizationId
        .andWhere(&#x27;EXISTS(SELECT 1 FROM jsonb_array_elements_text(CAST(issuer.metadata  AS jsonb)-&gt;\&#x27;deviceIds\&#x27;) AS ids(deviceId) WHERE CAST(ids.deviceId AS INTEGER) &#x3D; d.id)&#x27;)
        .andWhere(new Brackets(qb &#x3D;&gt; {
          if (filterDto.country) {
            const string &#x3D; filterDto.country;
            const values &#x3D; string.split(&quot;,&quot;);
            console.log(values);
            let CountryInvalid &#x3D; false;
            filterDto.country &#x3D; filterDto.country.toUpperCase();
            if (filterDto.country &amp;&amp; typeof filterDto.country &#x3D;&#x3D;&#x3D; &quot;string&quot; &amp;&amp; filterDto.country.length &#x3D;&#x3D;&#x3D; 3) {
              let countries &#x3D; countryCodesList;
              if (countries.find(ele &#x3D;&gt; ele.countryCode &#x3D;&#x3D;&#x3D; filterDto.country) &#x3D;&#x3D;&#x3D; undefined) {
                CountryInvalid &#x3D; true;
              }
            }

            if (!CountryInvalid) {
              const newCountry &#x3D; filterDto.country.toString()
              console.log(typeof newCountry)
              const CountryArray &#x3D; newCountry.split(&#x27;,&#x27;);
              qb.orWhere(new Brackets(qb &#x3D;&gt; {

                CountryArray.forEach((country, index) &#x3D;&gt; {
                  if (index &#x3D;&#x3D;&#x3D; 0) {
                    qb.where(&#x60;d.countryCode ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${country}%&#x60; });
                  } else {
                    qb.orWhere(&#x60;d.countryCode ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${country}%&#x60; });
                  }
                });
              }));

              // qb.orWhere(&#x27;d.countryCode LIKE &#x3D; :countrycode&#x27;, { countrycode: &#x60;%${filterDto.country}%&#x60; });

            }
          }
          if ((filterDto.fuelCode)) {
            console.log(typeof filterDto.fuelCode);
            console.log(typeof filterDto.fuelCode);
            const newfuelCode &#x3D; filterDto.fuelCode.toString()
            console.log(typeof newfuelCode)
            const fuelCodeArray &#x3D; newfuelCode.split(&#x27;,&#x27;);
            qb.orWhere(new Brackets(qb &#x3D;&gt; {

              fuelCodeArray.forEach((fuelCode, index) &#x3D;&gt; {
                if (index &#x3D;&#x3D;&#x3D; 0) {
                  qb.where(&#x60;d.fuelCode ILIKE :fuelcode${index}&#x60;, { [&#x60;fuelcode${index}&#x60;]: &#x60;%${fuelCode}%&#x60; });
                } else {
                  qb.orWhere(&#x60;d.fuelCode ILIKE :fuelcode${index}&#x60;, { [&#x60;fuelcode${index}&#x60;]: &#x60;%${fuelCode}%&#x60; });
                }
              });
            }));
            //  qb.orWhere(&#x60;d.fuelCode LIKE &#x3D; :fuelcode&#x60;,  &#x60;%${filterDto.fuelCode}%&#x60;);

          }
          if (filterDto.offTaker) {
            // console.log(typeof filterDto.offTaker);
            const newoffTaker &#x3D; filterDto.offTaker.toString()
            console.log(typeof newoffTaker)
            const offTakerArray &#x3D; newoffTaker.split(&#x27;,&#x27;);
            qb.orWhere(new Brackets(qb &#x3D;&gt; {

              offTakerArray.forEach((offTaker, index) &#x3D;&gt; {
                if (index &#x3D;&#x3D;&#x3D; 0) {
                  qb.where(&#x60;d.offTaker ILIKE :offtaker${index}&#x60;, { [&#x60;offtaker${index}&#x60;]: &#x60;%${offTaker}%&#x60; });
                } else {
                  qb.orWhere(&#x60;d.offTaker ILIKE :offtaker${index}&#x60;, { [&#x60;offtaker${index}&#x60;]: &#x60;%${offTaker}%&#x60; });
                }
              });
            }));
            // qb.orWhere(&#x27;d.offTakers LIKE &#x3D; :offTaker&#x27;,  &#x60;%${filterDto.offTaker}%&#x60;);

          }
          const startTimestamp &#x3D; new Date(filterDto.start_date).getTime() / 1000;
          const endTimestamp &#x3D; new Date(filterDto.end_date).getTime() / 1000;
          if (filterDto.start_date &amp;&amp; filterDto.end_date &#x3D;&#x3D;&#x3D; undefined) {
            qb.orWhere(&quot;issuer.generationStartTime &gt; :certificateStartDate &quot;, { certificateStartDate: startTimestamp })
          }
          if (filterDto.end_date &amp;&amp; filterDto.start_date &#x3D;&#x3D;&#x3D; undefined) {
            qb.orWhere(&quot;issuer.generationEndTime  &lt;:certificateEndDate&quot;, { certificateEndDate: endTimestamp })
          }
          if (filterDto.start_date &amp;&amp; filterDto.end_date) {
            qb.orWhere(&quot;issuer.generationStartTime BETWEEN :certificateStartDate1  AND :certificateEndDate1&quot;, { certificateStartDate1: startTimestamp, certificateEndDate1: endTimestamp })
          }
          if (filterDto.SDGBenefits) {
            console.log(filterDto.SDGBenefits);

            const newsdg &#x3D; filterDto.SDGBenefits.toString()
            console.log(typeof newsdg)
            const sdgBenefitsArray &#x3D; newsdg.split(&#x27;,&#x27;);
            const sdgBenefitString &#x3D; sdgBenefitsArray.map((benefit) &#x3D;&gt; benefit).join(&#x27;,&#x27;);
            qb.orWhere(new Brackets(qb &#x3D;&gt; {
              sdgBenefitsArray.forEach((benefit, index) &#x3D;&gt; {
                if (index &#x3D;&#x3D;&#x3D; 0) {
                  qb.where(&#x60;d.SDGBenefits ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${benefit}%&#x60; });
                } else {
                  qb.orWhere(&#x60;d.SDGBenefits ILIKE :benefit${index}&#x60;, { [&#x60;benefit${index}&#x60;]: &#x60;%${benefit}%&#x60; });
                }
              });
            }));

          }
          if (filterDto.fromAmountread &amp;&amp; filterDto.toAmountread) {
            qb.orWhere(&quot;dg_log.readvalue_watthour BETWEEN :fromAmountread  AND :toAmountread&quot;, { fromAmountread: filterDto.fromAmountread, toAmountread: filterDto.toAmountread })
          }
          if (filterDto.fromAmountread !&#x3D; null &amp;&amp; filterDto.toAmountread &#x3D;&#x3D;&#x3D; undefined) {
            qb.orWhere(&quot;dg_log.readvalue_watthour &gt; :fromAmountread&quot;, { fromAmountread: filterDto.fromAmountread })
          }
          if (filterDto.fromAmountread &#x3D;&#x3D;&#x3D; undefined &amp;&amp; filterDto.toAmountread !&#x3D; null) {
            qb.orWhere(&quot;dg_log.readvalue_watthour &lt; :toAmountread&quot;, { toAmountread: filterDto.toAmountread })
          }
        }));

    })
    const totalCountQuery &#x3D; await queryBuilder.getRawMany();
    const groupedDatasql &#x3D; await queryBuilder.offset(skip).limit(pageSize).getSql();
    console.log(groupedDatasql);
    const groupedData &#x3D; await queryBuilder.offset(skip).limit(pageSize).getRawMany();
    const totalCount &#x3D; totalCountQuery.length;
    console.log(&quot;totalCountQuery&quot;, totalCount);
    const totalPages &#x3D; Math.ceil(totalCount / pageSize);

    // if (pageNumber &gt; totalPages) {
    //   throw new HttpException(&#x27;Page number out of range&#x27;, HttpStatus.NOT_FOUND);
    // }
    console.log(totalPages);


    console.log(groupedData)
    let deviceGroups &#x3D; groupedData.reduce((acc, curr) &#x3D;&gt; {
      const existing &#x3D; acc.find(item &#x3D;&gt; item.dg_id &#x3D;&#x3D;&#x3D; curr.dg_id);
      if (existing) {
        let newobj &#x3D; {};
        const existing1 &#x3D; acc.find(item &#x3D;&gt; item.id &#x3D;&#x3D;&#x3D; curr.id);
        if (existing1) {
          existing.developerdeviceIds.push(curr.id);
        }
        existing.internalCertificateId.push(curr.id)
        // existing.certificatelog.push(newobj);
      } else {
        acc.push({
          dg_id: curr.devicegroupid,
          name: curr.name,
          deviceIdsInt: curr.deviceIdsInt,
          // deviceIdsInt: curr.deviceIdsInt,
          developerdeviceIds: [curr.id],
          internalCertificateId: [curr.id]
        });
        // console.log(acc);
      }
      return acc;
    }, []);
    // const totalPages &#x3D; 10;
    const response &#x3D; {
      deviceGroups,
      pageNumber,
      totalPages,
      totalCount
    };
    return response;
  }
}</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'DeviceGroupService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
